<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="yuan" href="https://huang-junyuan.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="yuan" href="https://huang-junyuan.github.io/atom.xml"><link rel="alternate" type="application/json" title="yuan" href="https://huang-junyuan.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="软工"><link rel="canonical" href="https://huang-junyuan.github.io/2022/09/19/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/"><title>整体设计--软工 - 软工 | Mi Manchi = yuan = Whatever is worth doing at all is worth doing well</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">整体设计--软工</h1><div class="meta"><span class="item" title="创建时间：2022-09-19 22:28:22"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-09-19T22:28:22+08:00">2022-09-19</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>18k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>16 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Mi Manchi</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(57).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(60).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(49).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(17).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(51).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(90).webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%BD%AF%E5%B7%A5/" itemprop="item" rel="index" title="分类于 软工"><span itemprop="name">软工</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://huang-junyuan.github.io/2022/09/19/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="yuan"><meta itemprop="description" content="Whatever is worth doing at all is worth doing well, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="yuan"></span><div class="body md" itemprop="articleBody"><p><strong>下面仅进行功能性介绍，具体设计待与团队成员商讨</strong></p><h2 id="用户的数据结构"><a class="anchor" href="#用户的数据结构">#</a> 用户的数据结构</h2><ul><li>id（数据库自动生成，注册时不需要用户填写）</li><li>用户名</li><li>密码</li><li>邮箱</li></ul><h2 id="登录界面"><a class="anchor" href="#登录界面">#</a> 登录界面</h2><h3 id="功能"><a class="anchor" href="#功能">#</a> 功能</h3><p>提供账号和密码登录和人脸登录两种，其中人脸登录仅在用户事先注册并录入人脸后后才能使用</p><p>提供注册</p><p>记录全局用户信息，其中 id 作为主要标识，当要向后端请求数据的使用 id，其他信息肯定也会在某些地方用得到</p><p>注册成功不用生成 token，登录才用</p><h3 id="登录界面-2"><a class="anchor" href="#登录界面-2">#</a> 登录界面</h3><p>sign-up-form 和 sign-in-form 是在子组件的登录和注册表单中定义的类名，但是样式却是在使用它们的父组件中才定义</p><p>在 vue 中，如果在子组件的标签中本身就有类名，则用到父组件中的时候，该类名是不会被去除的。vue 文件中使用的 <code>&lt;style scoped lang=&quot;less&quot;&gt;</code> 是使得样式仅作用在本 vue 文件，如果在父 vue 文件中使用到了子组件的类名定义样式，最终该样式是可以作用到显示出来的网页上的。</p><p>类选择器和 id 选择器是可以在父子选择器中用的（空格隔开），因此我只需要对子组件进行</p><p>如果在子组件中使用了一个 div 包裹了所有其他的标签，即根标签只有一个 div（假设该组件的名字是 One），在父组件中使用 <code>&lt;One id=&quot;testdiv&quot;&gt;&lt;/One&gt;</code> ，那么这个 <code>id=&quot;testdiv&quot;</code> 最终作用到 One 组件的最外层的 div 上，该 div 的子标签不具有 <code>id=&quot;testdiv&quot;</code></p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664294910034.png" alt="1664294910034"></p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664294944561.png" alt="1664294944561"></p><p>从 postman 中发送数据，在 django 中拿到的数据类型是 str</p><h3 id="技术点"><a class="anchor" href="#技术点">#</a> 技术点</h3><p>设置 vue 路由守卫，只有登录之后才能访问，否则不能进入主页面。（采用 jwt）</p><p>在全局 state 中设置一个保存用户信息的 cookie，</p><p>在路由守卫守卫中获取浏览器的 token 值，如果有的话，同时取出该用户的信息填入上述的全局用户信息中；如果没有的话，再跳转到登录界面</p><p>在密码登录时，在 vue 中先进行基本的数据合法检查，之后再用 axios 发送到 django 后端查找数据库中是否存在该用户</p><p>登录和注册使用的都是 post 方法，登录成功返回 post</p><p>对于表和视图函数</p><p>登录和注册使用的都是同一个表，以为需要验证的数据字段的个数不一样，因此使用两个序列化器</p><p>用户登录分为邮箱密码登录和人脸登录两种，前者属于表单登录，使用 post 方法；后者使用 get 登录，向后端传递图片的 base64、关键点坐标和框的坐标</p><p>人脸登录和账号登录都使用 post 发送数据，数据中另外加一个标识符，根据标识符使用不同的处理方式，另外还有人脸录入的功能，md，再使用一个标识符</p><ol start="0"><li>账号登录</li><li>账号注册</li><li>人脸登录</li><li>人脸录入</li></ol><p>应该在路由守卫中获取 token，并向后端发送请求查看此 token 是否有效，如果都可以，则跳过登录界面；如果有不行的，则移除 token 并跳转到登录界面</p><p>对于人脸录入，向后端发送的信息包括</p><ul><li>操作符 id</li><li>用户 id</li><li>图片宽度</li><li>图片高度</li><li>关键点坐标</li><li>检测框位置</li><li>图片的 base64</li></ul><p>在测试过程中，在登录时会存储全局信息 store，但是如果刷新之后，全局信息就没有了，但是 jwt-token 还在，可以不用登录就进入主界面，</p><p>我可以将用户的这些信息也存储在 token 中，因为这些信息不包括密码，本来也不是很隐私的。在路由守卫中获取这些信息置到全局信息 token 中。</p><p>在 ts 文件中是无法使用 pinia 的，所以换一种思路，如果当前全局 store 信息为空，则获取 token 的值，重新置到 store 中</p><p>You called this URL via POST, but the URL doesn't end in a slash and you have APPEND_SLASH set. Django can't redirect to the slash URL while maintaining POST data. Change your form to point to 127.0.0.1:8840/login/ (note the trailing slash), or set APPEND_SLASH=False in your Django settings.<br>、</p><p>在人脸登录时，先使用 mediapipe 检查摄像头是否检测到人脸，提供登录按钮。如果未检测到人脸，则在前端直接拒绝，如果检测到人脸，则生成 base64 发送到后端，后端检查数据库是否存在该人脸（设置余弦相似度阈值）并返回名字</p><h2 id="主功能界面"><a class="anchor" href="#主功能界面">#</a> 主功能界面</h2><h3 id="用户的个人中心"><a class="anchor" href="#用户的个人中心">#</a> 用户的个人中心</h3><h4 id="录入人脸"><a class="anchor" href="#录入人脸">#</a> 录入人脸</h4><p>使用人脸检测和姿态估计，防止录入姿态不对的人脸</p><h4 id="人脸库的处理"><a class="anchor" href="#人脸库的处理">#</a> 人脸库的处理</h4><p>之前做的桌面软件，用户有打开和关闭软件的动作，在这两个过程中才进行特征向量的读取和写入，其他时间特征向量都是报错在内存中的，</p><p>现在服务器也有打开和关闭，那么可以重用上面的操作，由于人脸特征向量使用 numpy 存储的，选择特定的文件夹，选择人物 id 文件名，numpy 直接导出</p><h4 id="人脸登录"><a class="anchor" href="#人脸登录">#</a> 人脸登录</h4><p>将 video 标签设置为绝对定位，就可以不用修改其他代码而只显示识别界面了</p><p>先在前端判断是否检测到人脸，如果点击登录时没有检测到人脸，则直接 alert，不向后端发送图片。</p><p>现在在向后端发送图片的时候，要同时传送图片的宽高。</p><h4 id="找回密码功能"><a class="anchor" href="#找回密码功能">#</a> 找回密码功能</h4><p>前端：弹出对话框，提示用户输入邮箱（发送验证码）和验证码，之后发送给后端校验后，将密码发送到邮箱。</p><p>后端：</p><h4 id="其他的个性化功能如名字之类的参考其他设计"><a class="anchor" href="#其他的个性化功能如名字之类的参考其他设计">#</a> 其他的个性化功能如名字之类的参考其他设计</h4><p>注意这里要同步数据库</p><p>参考网上的评论，决定数据库中不使用外键（自行搜索原因），因此我们在建立用户的表的时候要考虑到所有可能用到的字段</p><p>数据库使用关系型的 sqlite（大概率吧），也有可能是 mysql（小概率）</p><h3 id="md编辑"><a class="anchor" href="#md编辑">#</a> md 编辑</h3><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NjI3NDA3L2FydGljbGUvZGV0YWlscy8xMjY1ODEzNDA=">https://blog.csdn.net/m0_46627407/article/details/126581340</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODg5MjU2L2FydGljbGUvZGV0YWlscy8xMDgxMTc3MjE=">https://blog.csdn.net/qq_40889256/article/details/108117721</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTE1NDQwODY1MjU1MTEyNzE4">https://juejin.cn/post/6915440865255112718</span></p><h3 id="自习室聊天室"><a class="anchor" href="#自习室聊天室">#</a> 自习室（聊天室）</h3><p>url 中使用正则表达式，将房间名提取出来，进入房间时使用相同的房间页面，相同的 view 函数<br>，但是发送 websocket 连接时使用到房间名，这样进入同一个房间的人就能连接到相同的<br>websocket 服务器了</p><h3 id="坐姿方面"><a class="anchor" href="#坐姿方面">#</a> 坐姿方面</h3><p>用户先自定义端正好坐姿时脸的高度，之后假如摄像头前的用户弓着腰导致坐姿不端正了，给予一定的提醒</p><h3 id="手势切换ppt"><a class="anchor" href="#手势切换ppt">#</a> 手势切换 PPT</h3><p>就是字面意思</p><p>设置内部 div 和浏览器界面之间无缝隙</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664188938002.png" alt="1664188938002"></p><h3 id="运动姿态"><a class="anchor" href="#运动姿态">#</a> 运动姿态</h3><p>基于人体骨架，譬如下蹲计数等</p><h3 id="nlp领域的我不是很敢确定gpt可以用来做文本生成的像辅助理解之类的应该有模型"><a class="anchor" href="#nlp领域的我不是很敢确定gpt可以用来做文本生成的像辅助理解之类的应该有模型">#</a> nlp 领域的我不是很敢确定，gpt 可以用来做文本生成的，像辅助理解之类的应该有模型</h3><p>在 huggingface 上找到的模型</p><h3 id="summarize"><a class="anchor" href="#summarize">#</a> summarize</h3><p>中文到中文：<span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9JREVBLUNDTkwvUmFuZGVuZy1QZWdhc3VzLTIzOE0tU3VtbWFyeS1DaGluZXNl">https://huggingface.co/IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9JREVBLUNDTkwvUmFuZGVuZy1QZWdhc3VzLTIzOE0tU3VtbWFyeS1DaGluZXNl">https://huggingface.co/IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese</span></p><p>英文到中文：<span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9jc2VidWV0bmxwL21UNV9tMm9fY2hpbmVzZV9zaW1wbGlmaWVkX2Nyb3NzU3VtP3RleHQ9VmlkZW9zK3RoYXQrc2F5K2FwcHJvdmVkK3ZhY2NpbmVzK2FyZStkYW5nZXJvdXMrYW5kK2NhdXNlK2F1dGlzbSUyQytjYW5jZXIrb3IraW5mZXJ0aWxpdHkrYXJlK2Ftb25nK3Rob3NlK3RoYXQrd2lsbCtiZSt0YWtlbitkb3duJTJDK3RoZStjb21wYW55K3NhaWQuKytUaGUrcG9saWN5K2luY2x1ZGVzK3RoZSt0ZXJtaW5hdGlvbitvZithY2NvdW50cytvZithbnRpLXZhY2NpbmUraW5mbHVlbmNlcnMuKytUZWNoK2dpYW50cytoYXZlK2JlZW4rY3JpdGljaXNlZCtmb3Irbm90K2RvaW5nK21vcmUrdG8rY291bnRlcitmYWxzZStoZWFsdGgraW5mb3JtYXRpb24rb24rdGhlaXIrc2l0ZXMuKytJbitKdWx5JTJDK1VTK1ByZXNpZGVudCtKb2UrQmlkZW4rc2FpZCtzb2NpYWwrbWVkaWErcGxhdGZvcm1zK3dlcmUrbGFyZ2VseStyZXNwb25zaWJsZStmb3IrcGVvcGxlJTI3cytzY2VwdGljaXNtK2luK2dldHRpbmcrdmFjY2luYXRlZCtieStzcHJlYWRpbmcrbWlzaW5mb3JtYXRpb24lMkMrYW5kK2FwcGVhbGVkK2Zvcit0aGVtK3RvK2FkZHJlc3MrdGhlK2lzc3VlLisrWW91VHViZSUyQyt3aGljaCtpcytvd25lZCtieStHb29nbGUlMkMrc2FpZCsxMzAlMkMwMDArdmlkZW9zK3dlcmUrcmVtb3ZlZCtmcm9tK2l0cytwbGF0Zm9ybStzaW5jZStsYXN0K3llYXIlMkMrd2hlbitpdCtpbXBsZW1lbnRlZCthK2Jhbitvbitjb250ZW50K3NwcmVhZGluZyttaXNpbmZvcm1hdGlvbithYm91dCtDb3ZpZCt2YWNjaW5lcw==">https://huggingface.co/csebuetnlp/mT5_m2o_chinese_simplified_crossSum?text=Videos+that+say+approved+vaccines+are+dangerous+and+cause+autism%2C+cancer+or+infertility+are+among+those+that+will+be+taken+down%2C+the+company+said.++The+policy+includes+the+termination+of+accounts+of+anti-vaccine+influencers.++Tech+giants+have+been+criticised+for+not+doing+more+to+counter+false+health+information+on+their+sites.++In+July%2C+US+President+Joe+Biden+said+social+media+platforms+were+largely+responsible+for+people's+scepticism+in+getting+vaccinated+by+spreading+misinformation%2C+and+appealed+for+them+to+address+the+issue.++YouTube%2C+which+is+owned+by+Google%2C+said+130%2C000+videos+were+removed+from+its+platform+since+last+year%2C+when+it+implemented+a+ban+on+content+spreading+misinformation+about+Covid+vaccines</span>.<ins>In+a+blog+post%2C+the+company+said+it+had+seen+false+claims+about+Covid+jabs+%22spill+over+into+misinformation+about+vaccines+in+general%22.+The+new+policy+covers+long-approved+vaccines%2C+such+as+those+against+measles+or+hepatitis+B.</ins>%22We%27re+expanding+our+medical+misinformation+policies+on+YouTube+with+new+guidelines+on+currently+administered+vaccines+that+are+approved+and+confirmed+to+be+safe+and+effective+by+local+health+authorities+and+the+WHO%2C%22+the+post+said%2C+referring+to+the+World+Health+Organization.</p><p>中文到文言文</p><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9yYXluYXJkai93ZW55YW53ZW4tY2hpbmVzZS10cmFuc2xhdGUtdG8tYW5jaWVudA==">https://huggingface.co/raynardj/wenyanwen-chinese-translate-to-ancient</span></p><h3 id="文本生成"><a class="anchor" href="#文本生成">#</a> 文本生成</h3><p>从关键词生成文本：<span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9jb2Nvc2hlL2dwdDItY2hpbmVzZS1nZW4tYWRzLWJ5LWtleXdvcmRz">https://huggingface.co/cocoshe/gpt2-chinese-gen-ads-by-keywords</span></p><p>将句子改成带有修辞的：<span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9maWd1cmF0aXZlLW5scC9DaGluZXNlLVNpbWlsZS1HZW5lcmF0aW9u">https://huggingface.co/figurative-nlp/Chinese-Simile-Generation</span></p><h2 id="人脸模块"><a class="anchor" href="#人脸模块">#</a> 人脸模块</h2><h3 id="人脸对齐"><a class="anchor" href="#人脸对齐">#</a> 人脸对齐</h3><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663906003221.png" alt="1663906003221"></p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663906010553.png" alt="1663906010553"></p><p>上面的图片和关键点是在 500x500 的摄像区域中操作的</p><p>大约估计如下</p><ol start="0"><li><p>x=0.4, y=0.48 为左眼</p></li><li><p>x=0.6, y=0.48 为右眼</p></li><li><p>x=0.5, y=0.62 为鼻子</p></li><li><p>x=0.5, y=0.71 为上嘴唇尖点</p></li><li><p>x=0.3, y=0.5 为面部左侧点</p></li><li><p>x=0.75, y=0.5 为面部右侧点</p></li><li><p>x=0.4, y=0.48 为左眼</p></li><li><p>x=0.6, y=0.48 为右眼</p></li><li><p>x=0.5, y=0.62 为鼻子</p></li><li><p>x=0.5, y=0.71 为上嘴唇尖点</p></li><li><p>x=0.3, y=0.5 为面部左侧点</p></li><li><p>x=0.75, y=0.5 为面部右侧点</p></li></ol><h3 id="框"><a class="anchor" href="#框">#</a> 框</h3><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663916799101.png" alt="1663916799101"></p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663917273555.png" alt="1663917273555"></p><p>进行人脸对齐主要是使用相似变换矩阵，所以我们可以先把人脸图片给截出来，</p><p>登录和路由 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUFkNHkxejdYOT9wPTMmYW1wO3ZkX3NvdXJjZT0xYzU2MjgzMWZhYjFjYjQxMDFlNWI5NWQ0MWMxNzBlMA==">https://www.bilibili.com/video/BV1Ad4y1z7X9?p=3&amp;vd_source=1c562831fab1cb4101e5b95d41c170e0</span></p><p>人脸部分</p><ul><li>人脸对齐</li><li>特征提取</li><li>前端获取的数据格式对应的调整</li></ul><p>下面是关键点的位置坐标，只需要提取出 xy 并乘以图像的宽高就可以了<br><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663906010553.png" alt="1663906010553"></p><p>下面是框的信息<br><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663916799101.png" alt="1663916799101"></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 提取字段并乘以图像的宽高</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xCenter <span class="token operator">=</span> myDict<span class="token punctuation">[</span><span class="token string">'xCenter'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="3"></td><td><pre>yCenter <span class="token operator">=</span> myDict<span class="token punctuation">[</span><span class="token string">'yCenter'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="4"></td><td><pre>height <span class="token operator">=</span> myDict<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="5"></td><td><pre>width <span class="token operator">=</span> myDict<span class="token punctuation">[</span><span class="token string">'width'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 计算左上角坐标和右下角坐标</span></pre></td></tr><tr><td data-num="8"></td><td><pre>left_corner <span class="token operator">=</span> <span class="token punctuation">[</span>xCenter <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> yCenter <span class="token operator">-</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>right_corner <span class="token operator">=</span> <span class="token punctuation">[</span>xCenter <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> yCenter <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 得到 bbox</span></pre></td></tr></table></figure><h2 id="nlp模块"><a class="anchor" href="#nlp模块">#</a> nlp 模块</h2><h3 id="文章续写"><a class="anchor" href="#文章续写">#</a> 文章续写</h3><h4 id="uergpt2-chinese-cluecorpussmall"><a class="anchor" href="#uergpt2-chinese-cluecorpussmall">#</a> uer/gpt2-chinese-cluecorpussmall</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby91ZXIvZ3B0Mi1jaGluZXNlLWNsdWVjb3JwdXNzbWFsbA==">https://huggingface.co/uer/gpt2-chinese-cluecorpussmall</span></p><p>通过对 Common Crawl 的中文部分进行语料清洗，</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663975766942.png" alt="1663975766942"></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> BertTokenizer<span class="token punctuation">,</span> GPT2LMHeadModel<span class="token punctuation">,</span> TextGenerationPipeline</pre></td></tr><tr><td data-num="2"></td><td><pre>tokenizer <span class="token operator">=</span> BertTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-cluecorpussmall"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>model <span class="token operator">=</span> GPT2LMHeadModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-cluecorpussmall"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>text_generator <span class="token operator">=</span> TextGenerationPipeline<span class="token punctuation">(</span>model<span class="token punctuation">,</span> tokenizer<span class="token punctuation">)</span>   </pre></td></tr><tr><td data-num="5"></td><td><pre>text_generator<span class="token punctuation">(</span><span class="token string">"这是很久之前的事情了"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> do_sample<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="提取式qa"><a class="anchor" href="#提取式qa">#</a> 提取式 QA</h3><h4 id="uerroberta-base-chinese-extractive-qa"><a class="anchor" href="#uerroberta-base-chinese-extractive-qa">#</a> uer/roberta-base-chinese-extractive-qa</h4><p>可以看看有没有 large</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoModelForQuestionAnswering<span class="token punctuation">,</span>AutoTokenizer<span class="token punctuation">,</span>pipeline</pre></td></tr><tr><td data-num="2"></td><td><pre>model <span class="token operator">=</span> AutoModelForQuestionAnswering<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'uer/roberta-base-chinese-extractive-qa'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'uer/roberta-base-chinese-extractive-qa'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>QA <span class="token operator">=</span> pipeline<span class="token punctuation">(</span><span class="token string">'question-answering'</span><span class="token punctuation">,</span> model<span class="token operator">=</span>model<span class="token punctuation">,</span> tokenizer<span class="token operator">=</span>tokenizer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>QA_input <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'question'</span><span class="token punctuation">:</span> <span class="token string">"著名诗歌《假如生活欺骗了你》的作者是"</span><span class="token punctuation">,</span><span class="token string">'context'</span><span class="token punctuation">:</span> <span class="token string">"普希金从那里学习人民的语言，吸取了许多有益的养料，这一切对普希金后来的创作产生了很大的影响。这两年里，普希金创作了不少优秀的作品，如《囚徒》、《致大海》、《致凯恩》和《假如生活欺骗了你》等几十首抒情诗，叙事诗《努林伯爵》，历史剧《鲍里斯·戈都诺夫》，以及《叶甫盖尼·奥涅金》前六章。"</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>QA<span class="token punctuation">(</span>QA_input<span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="诗歌生成"><a class="anchor" href="#诗歌生成">#</a> 诗歌生成</h3><h4 id="uergpt2-chinese-lyric"><a class="anchor" href="#uergpt2-chinese-lyric">#</a> uer/gpt2-chinese-lyric</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby91ZXIvZ3B0Mi1jaGluZXNlLWx5cmlj">https://huggingface.co/uer/gpt2-chinese-lyric</span></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> BertTokenizer<span class="token punctuation">,</span> GPT2LMHeadModel<span class="token punctuation">,</span> TextGenerationPipeline</pre></td></tr><tr><td data-num="2"></td><td><pre>tokenizer <span class="token operator">=</span> BertTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-lyric"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>model <span class="token operator">=</span> GPT2LMHeadModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-lyric"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>text_generator <span class="token operator">=</span> TextGenerationPipeline<span class="token punctuation">(</span>model<span class="token punctuation">,</span> tokenizer<span class="token punctuation">)</span>   </pre></td></tr><tr><td data-num="5"></td><td><pre>text_generator<span class="token punctuation">(</span><span class="token string">"最美的不是下雨天，是曾与你躲过雨的屋檐"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> do_sample<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>现代诗歌</p><h4 id="uergpt2-chinese-poem"><a class="anchor" href="#uergpt2-chinese-poem">#</a> uer/gpt2-chinese-poem</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby91ZXIvZ3B0Mi1jaGluZXNlLXBvZW0=">https://huggingface.co/uer/gpt2-chinese-poem</span></p><p>古文</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> BertTokenizer<span class="token punctuation">,</span> GPT2LMHeadModel<span class="token punctuation">,</span>TextGenerationPipeline</pre></td></tr><tr><td data-num="2"></td><td><pre>tokenizer <span class="token operator">=</span> BertTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-poem"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>model <span class="token operator">=</span> GPT2LMHeadModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"uer/gpt2-chinese-poem"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>text_generator <span class="token operator">=</span> TextGenerationPipeline<span class="token punctuation">(</span>model<span class="token punctuation">,</span> tokenizer<span class="token punctuation">)</span>   </pre></td></tr><tr><td data-num="5"></td><td><pre>text_generator<span class="token punctuation">(</span><span class="token string">"[CLS]梅 山 如 积 翠 ，"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> do_sample<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="摘要"><a class="anchor" href="#摘要">#</a> 摘要</h3><h4 id="csebuetnlpmt5_m2o_chinese_simplified_crosssum"><a class="anchor" href="#csebuetnlpmt5_m2o_chinese_simplified_crosssum">#</a> csebuetnlp/mT5_m2o_chinese_simplified_crossSum</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9jc2VidWV0bmxwL21UNV9tMm9fY2hpbmVzZV9zaW1wbGlmaWVkX2Nyb3NzU3VtP3RleHQ9VmlkZW9zK3RoYXQrc2F5K2FwcHJvdmVkK3ZhY2NpbmVzK2FyZStkYW5nZXJvdXMrYW5kK2NhdXNlK2F1dGlzbSUyQytjYW5jZXIrb3IraW5mZXJ0aWxpdHkrYXJlK2Ftb25nK3Rob3NlK3RoYXQrd2lsbCtiZSt0YWtlbitkb3duJTJDK3RoZStjb21wYW55K3NhaWQuKytUaGUrcG9saWN5K2luY2x1ZGVzK3RoZSt0ZXJtaW5hdGlvbitvZithY2NvdW50cytvZithbnRpLXZhY2NpbmUraW5mbHVlbmNlcnMuKytUZWNoK2dpYW50cytoYXZlK2JlZW4rY3JpdGljaXNlZCtmb3Irbm90K2RvaW5nK21vcmUrdG8rY291bnRlcitmYWxzZStoZWFsdGgraW5mb3JtYXRpb24rb24rdGhlaXIrc2l0ZXMuKytJbitKdWx5JTJDK1VTK1ByZXNpZGVudCtKb2UrQmlkZW4rc2FpZCtzb2NpYWwrbWVkaWErcGxhdGZvcm1zK3dlcmUrbGFyZ2VseStyZXNwb25zaWJsZStmb3IrcGVvcGxlJTI3cytzY2VwdGljaXNtK2luK2dldHRpbmcrdmFjY2luYXRlZCtieStzcHJlYWRpbmcrbWlzaW5mb3JtYXRpb24lMkMrYW5kK2FwcGVhbGVkK2Zvcit0aGVtK3RvK2FkZHJlc3MrdGhlK2lzc3VlLisrWW91VHViZSUyQyt3aGljaCtpcytvd25lZCtieStHb29nbGUlMkMrc2FpZCsxMzAlMkMwMDArdmlkZW9zK3dlcmUrcmVtb3ZlZCtmcm9tK2l0cytwbGF0Zm9ybStzaW5jZStsYXN0K3llYXIlMkMrd2hlbitpdCtpbXBsZW1lbnRlZCthK2Jhbitvbitjb250ZW50K3NwcmVhZGluZyttaXNpbmZvcm1hdGlvbithYm91dCtDb3ZpZCt2YWNjaW5lcw==">https://huggingface.co/csebuetnlp/mT5_m2o_chinese_simplified_crossSum?text=Videos+that+say+approved+vaccines+are+dangerous+and+cause+autism%2C+cancer+or+infertility+are+among+those+that+will+be+taken+down%2C+the+company+said.++The+policy+includes+the+termination+of+accounts+of+anti-vaccine+influencers.++Tech+giants+have+been+criticised+for+not+doing+more+to+counter+false+health+information+on+their+sites.++In+July%2C+US+President+Joe+Biden+said+social+media+platforms+were+largely+responsible+for+people's+scepticism+in+getting+vaccinated+by+spreading+misinformation%2C+and+appealed+for+them+to+address+the+issue.++YouTube%2C+which+is+owned+by+Google%2C+said+130%2C000+videos+were+removed+from+its+platform+since+last+year%2C+when+it+implemented+a+ban+on+content+spreading+misinformation+about+Covid+vaccines</span>.<ins>In+a+blog+post%2C+the+company+said+it+had+seen+false+claims+about+Covid+jabs+%22spill+over+into+misinformation+about+vaccines+in+general%22.+The+new+policy+covers+long-approved+vaccines%2C+such+as+those+against+measles+or+hepatitis+B.</ins>%22We%27re+expanding+our+medical+misinformation+policies+on+YouTube+with+new+guidelines+on+currently+administered+vaccines+that+are+approved+and+confirmed+to+be+safe+and+effective+by+local+health+authorities+and+the+WHO%2C%22+the+post+said%2C+referring+to+the+World+Health+Organization.</p><p>this model tries to summarize text written in any language in Chinese(Simplified).</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> re</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoTokenizer<span class="token punctuation">,</span> AutoModelForSeq2SeqLM</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>WHITESPACE_HANDLER <span class="token operator">=</span> <span class="token keyword">lambda</span> k<span class="token punctuation">:</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\s+'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\n+'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> k<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>article_text <span class="token operator">=</span> <span class="token triple-quoted-string string">"""Videos that say approved vaccines are dangerous and cause autism, cancer or infertility are among those that will be taken down, the company said.  The policy includes the termination of accounts of anti-vaccine influencers.  Tech giants have been criticised for not doing more to counter false health information on their sites.  In July, US President Joe Biden said social media platforms were largely responsible for people's scepticism in getting vaccinated by spreading misinformation, and appealed for them to address the issue.  YouTube, which is owned by Google, said 130,000 videos were removed from its platform since last year, when it implemented a ban on content spreading misinformation about Covid vaccines.  In a blog post, the company said it had seen false claims about Covid jabs "spill over into misinformation about vaccines in general". The new policy covers long-approved vaccines, such as those against measles or hepatitis B.  "We're expanding our medical misinformation policies on YouTube with new guidelines on currently administered vaccines that are approved and confirmed to be safe and effective by local health authorities and the WHO," the post said, referring to the World Health Organization."""</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>model_name <span class="token operator">=</span> <span class="token string">"csebuetnlp/mT5_m2o_chinese_simplified_crossSum"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>model_name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>model <span class="token operator">=</span> AutoModelForSeq2SeqLM<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>model_name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>input_ids <span class="token operator">=</span> tokenizer<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">[</span>WHITESPACE_HANDLER<span class="token punctuation">(</span>article_text<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    return_tensors<span class="token operator">=</span><span class="token string">"pt"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    padding<span class="token operator">=</span><span class="token string">"max_length"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    truncation<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    max_length<span class="token operator">=</span><span class="token number">512</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"input_ids"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>output_ids <span class="token operator">=</span> model<span class="token punctuation">.</span>generate<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    input_ids<span class="token operator">=</span>input_ids<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    max_length<span class="token operator">=</span><span class="token number">84</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    no_repeat_ngram_size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    num_beams<span class="token operator">=</span><span class="token number">4</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>summary <span class="token operator">=</span> tokenizer<span class="token punctuation">.</span>decode<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    output_ids<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    skip_special_tokens<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    clean_up_tokenization_spaces<span class="token operator">=</span><span class="token boolean">False</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>summary<span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="idea-ccnlrandeng-pegasus-238m-summary-chinese"><a class="anchor" href="#idea-ccnlrandeng-pegasus-238m-summary-chinese">#</a> IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9JREVBLUNDTkwvUmFuZGVuZy1QZWdhc3VzLTIzOE0tU3VtbWFyeS1DaGluZXNl">https://huggingface.co/IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese</span></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> PegasusForConditionalGeneration<span class="token punctuation">,</span>BertTokenizer</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># Need to download tokenizers_pegasus.py and other Python script from Fengshenbang-LM github repo in advance,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># or you can download tokenizers_pegasus.py and data_utils.py in https://huggingface.co/IDEA-CCNL/Randeng_Pegasus_523M/tree/main</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># Strongly recommend you git clone the Fengshenbang-LM repo:</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 1. git clone https://github.com/IDEA-CCNL/Fengshenbang-LM</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 2. cd Fengshenbang-LM/fengshen/examples/pegasus/</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># and then you will see the tokenizers_pegasus.py and data_utils.py which are needed by pegasus model</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">from</span> tokenizers_pegasus <span class="token keyword">import</span> PegasusTokenizer</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>model <span class="token operator">=</span> PegasusForConditionalGeneration<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>tokenizer <span class="token operator">=</span> PegasusTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"IDEA-CCNL/Randeng-Pegasus-238M-Summary-Chinese"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>text <span class="token operator">=</span> <span class="token string">"在北京冬奥会自由式滑雪女子坡面障碍技巧决赛中，中国选手谷爱凌夺得银牌。祝贺谷爱凌！今天上午，自由式滑雪女子坡面障碍技巧决赛举行。决赛分三轮进行，取选手最佳成绩排名决出奖牌。第一跳，中国选手谷爱凌获得69.90分。在12位选手中排名第三。完成动作后，谷爱凌又扮了个鬼脸，甚是可爱。第二轮中，谷爱凌在道具区第三个障碍处失误，落地时摔倒。获得16.98分。网友：摔倒了也没关系，继续加油！在第二跳失误摔倒的情况下，谷爱凌顶住压力，第三跳稳稳发挥，流畅落地！获得86.23分！此轮比赛，共12位选手参赛，谷爱凌第10位出场。网友：看比赛时我比谷爱凌紧张，加油！"</span></pre></td></tr><tr><td data-num="15"></td><td><pre>inputs <span class="token operator">=</span> tokenizer<span class="token punctuation">(</span>text<span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> return_tensors<span class="token operator">=</span><span class="token string">"pt"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># Generate Summary</span></pre></td></tr><tr><td data-num="18"></td><td><pre>summary_ids <span class="token operator">=</span> model<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>inputs<span class="token punctuation">[</span><span class="token string">"input_ids"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>tokenizer<span class="token punctuation">.</span>batch_decode<span class="token punctuation">(</span>summary_ids<span class="token punctuation">,</span> skip_special_tokens<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> clean_up_tokenization_spaces<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># model Output: 滑雪女子坡面障碍技巧决赛谷爱凌获银牌</span></pre></td></tr></table></figure><h3 id="现代中文和文言文的翻译"><a class="anchor" href="#现代中文和文言文的翻译">#</a> 现代中文和文言文的翻译</h3><h4 id="raynardjwenyanwen-chinese-translate-to-ancient"><a class="anchor" href="#raynardjwenyanwen-chinese-translate-to-ancient">#</a> raynardj/wenyanwen-chinese-translate-to-ancient</h4><p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9yYXluYXJkai93ZW55YW53ZW4tY2hpbmVzZS10cmFuc2xhdGUtdG8tYW5jaWVudA==">https://huggingface.co/raynardj/wenyanwen-chinese-translate-to-ancient</span></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> transformers <span class="token keyword">import</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  EncoderDecoderModel<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  AutoTokenizer</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>PRETRAINED <span class="token operator">=</span> <span class="token string">"raynardj/wenyanwen-chinese-translate-to-ancient"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>PRETRAINED<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>model <span class="token operator">=</span> EncoderDecoderModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>PRETRAINED<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">def</span> <span class="token function">inference</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    tk_kwargs <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      truncation<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      max_length<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      padding<span class="token operator">=</span><span class="token string">"max_length"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      return_tensors<span class="token operator">=</span><span class="token string">'pt'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>   </pre></td></tr><tr><td data-num="16"></td><td><pre>    inputs <span class="token operator">=</span> tokenizer<span class="token punctuation">(</span><span class="token punctuation">[</span>text<span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">**</span>tk_kwargs<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">return</span> tokenizer<span class="token punctuation">.</span>batch_decode<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            model<span class="token punctuation">.</span>generate<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            inputs<span class="token punctuation">.</span>input_ids<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            attention_mask<span class="token operator">=</span>inputs<span class="token punctuation">.</span>attention_mask<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            num_beams<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            bos_token_id<span class="token operator">=</span><span class="token number">101</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            eos_token_id<span class="token operator">=</span>tokenizer<span class="token punctuation">.</span>sep_token_id<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            pad_token_id<span class="token operator">=</span>tokenizer<span class="token punctuation">.</span>pad_token_id<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">)</span><span class="token punctuation">,</span> skip_special_tokens<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1663976566884.png" alt="1663976566884"></p><h3 id="环境配置"><a class="anchor" href="#环境配置">#</a> 环境配置</h3><p>pip install --no-binary=protobuf protobuf</p><h2 id="界面设计篇"><a class="anchor" href="#界面设计篇">#</a> 界面设计篇</h2><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664498556840.png" alt="1664498556840"></p><p>模糊效果</p><p><span class="exturl" data-url="aHR0cHM6Ly9tb2Rhby5jYy9jb21tdW5pdHkvbXRsNHhqaWt2bmw4d3RzND90aXRsZT1hcmNvZGVzaWducHJvJUU1JUFEJTk3JUU4JThBJTgyJUU4JUI3JUIzJUU1JThBJUE4YiVFNyVBQiVBRiVFNyVBRSVBMSVFNyU5MCU4NiVFNSU5MCU4RSVFNSU4RiVCMA==">整体参考</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9tb2Rhby5jYy9jb21tdW5pdHkvbXRra3FnZGRnem1xY3hscD90aXRsZT0lRTclQTclODElRTQlQkElQkElRTUlOEMlQkIlRTclOTYlOTclRTUlODElQTUlRTUlQkElQjclRTclQUUlQTElRTclOTAlODYlRTUlQjklQjMlRTUlOEYlQjAlRTMlODAlOTAwMSVFMyU4MCU5MQ==">https://modao.cc/community/mtkkqgddgzmqcxlp?title = 私人医疗健康管理平台【01】</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9tb2Rhby5jYy9jb21tdW5pdHkvbXRrdHk3d2VpdmR5NHNiYj90aXRsZT0lRTQlQkIlOTMlRTUlQkElOTMlRTUlQjclQTElRTYlQTMlODAlRTUlQjklQjMlRTUlOEYlQjA=">https://modao.cc/community/mtkty7weivdy4sbb?title = 仓库巡检平台</span></p><p>在首页上展示基本的学习情况，如一周以来的学习时长，每日一句，TODO</p><p>高度和宽度分别使用 vh 和 vw 作为单位，这个是将浏览器视图进行划分的方法，</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664527532239.png" alt="1664527532239"></p><ul><li>如何将侧边栏占满余下的全部高度呢？<br>将侧边栏的三个部分进行 vh 划分，</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>&lt;el-menu default-active="user" class="el-menu-vertical-demo" :collapse="isCollapse"</pre></td></tr><tr><td data-num="2"></td><td><pre>                            @open="handleOpen" @close="handleClose" :router="true" text-color="#fff"</pre></td></tr><tr><td data-num="3"></td><td><pre>                            background-color='#52B7F5' style="border-radius: var(--el-border-radius-round);"</pre></td></tr></table></figure><p>应该添加一个顶部栏的</p><p>在左侧导航栏折叠和打开的时候，其占有的宽度应该要发生改变，这里可以使用计算属性或者监听控制展开和折叠的选项，</p><p>另外展开和折叠变成一个，</p><p>顶部可以显示一些激励性的话语</p><p>导航栏折叠和展开时内容之间的宽度占比是不一样的，控制类名</p><p>当使用编程式导航时，运行 <code>router.push('/pdfControl')</code> 时，如果该路由使用的界面是某个组件的子组件时（如这里在有侧边栏的主界面中使用 pdfControl），侧边栏是不会变的。</p><p>pdf 采用的是绝对定位，所以 上一页 的按钮不应该放在 pdf 的下面，这里就选择放在右侧吧</p><p>那怎么保证 pdf 一定在界面内呢？貌似仅仅调节 id=&quot;pdf-container&quot; 的宽度，它就可以进行自适应的调整高度了</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-row</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>24<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>facedetect<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>                                <span class="token comment">&lt;!-- 注意下面的两个标签都设置镜像翻转 --></span></pre></td></tr><tr><td data-num="5"></td><td><pre>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videocanvas<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoElement<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">rotateY</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>output_canvas<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canvasElement<span class="token punctuation">"</span></span> <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canvasWidth<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>                                        <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canvasHeight<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">rotateY</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-row</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>控制 el-col 或 el-row 的内容居中用 <code>justify-content: center;</code></p><p>在选择 pdf 之后，它的高度和宽度是自己计算出来的，认为的给定高度或宽度都会造成拉伸。所以应该主动获取元素的高度和宽度</p><p>在 url 改变的时候，整个文档还没加载出来，因此获取的宽度和高度都是之前加载的文档的。</p><p>那就同时给定高度和宽度的调节滑块</p><p>当首次使用滑块的时候先拿到 canvas 的值，</p><p>当成功切换文件时重置</p><p>设置弹出消息的时候，给出一个布尔值，当第一次坐姿不端正时，设置布尔值为 true，</p><p>当坐姿端正后，需要系统自动关闭消息弹出框，</p><p>自习研讨室</p><p>自习室应该显示有数量显示</p><p>先在侧边栏点进去的时候，有目前公开的自习室列表，同时支持用户自行创建一个自习室，</p><p>先不设置自习室的时长功能，貌似这个得要设置死循环，在循环中不断查看当前时间，</p><p>前端界面中的自习室列表功能得需要 websocket 连接，因为当有用户新创建了一个自习室的时候，要及时更新所有用户的自习室列表。</p><p>自习室还得提供群主功能，如果群主关闭连接了，则自习室就解散了，使用 <code>StopConsumer()</code> ，那么就要标识群主的身份。</p><p>创建自习室就是创建一个 websocket 连接，</p><p>当目前已在一个自习室中仍要加入其他自习室的时候，要弹出提示框说明 “您当前在一个自习室中，加入新的自习室将自动退出当前自习室”</p><p>房间的区分依靠的是名字，同时使用正则表达式，将房间的名字放在 websocket 连接的 url 的最后。</p><p>房间列表的 websocket 连接的 url 是固定的</p><p>我先根据名称连接上，后端从 url 中提取出名称，然后全部的连接都进行保存，</p><p>查看连接的时候能不能携带信息过去</p><ul><li>我要怎么把创建的房间名称传给后端呢？</li></ul><p>设置 id 字段，</p><p>创建房间（在创建后发送）<br>id: 0<br>room_name:<br>theme:<br>permission: private / public</p><p>根据 permission 字段来确定保存不保存当前连接对象，方面后面的信息列表获取</p><p>加入房间：<br>id: 1<br>room_name:</p><p>python 中的列表可以同时装不同的数据类型</p><p>采用字典，键值对为：</p><ul><li>房间名 --&gt;[连接对象，...]</li></ul><p>在使用列表保存所有的房间名和其对应的主题<br>[{name:'k', 'theme': 'k'}, ... ]</p><p>正常聊天功能<br>id: 2<br>sentence: 句子</p><p>加入自习室和创建自习室可以写到一起，判断当前自习室是否存在就行了</p><p>在房间信息中要包括房间人数</p><p>在服务端可以推送什么类型的数据给前端呢？只能是字符串么？可以是字典类型么？</p><p>在创建房间的时候同时发送两个 websocket 数据</p><p>影响公开的房间信息的时间有：</p><ul><li>当创建新房间时</li><li>有人加入房间时（人数变化）</li><li>有人离开房间导致该房间的人数为空时（房间自动删除）</li></ul><p>两个后端 consumer 不能直接通信，但是可以通过前端来进行间接通信。</p><p>roomListSocket 首次连接时，后端向前端推送所有的房间信息。</p><p>当有人通过 chatSocket 创建新房间的时候，前端同时通过</p><p>当有人通过 chatSocket 加入房间时，前端同时通过 roomListSocket 发送请求，之后后端向所有的前端用户推送最新的房间信息</p><p>有人离开房间（chatSocket 关闭）导致房间的人数或房间的总个数发生变化时，在 chatSocket 的 onclose 方法中向 roomListSocket 发送信息，之后 roomListSocket 向所有前端用户推送最新的房间信息</p><p>前端从后端拿到的数据有两种类型：</p><ol><li>房间信息 info_id = 0</li><li>转发的聊天信息 info_id = 1</li></ol><p>没必要进行上面的区分，两个信息是通过不同的 socket 进行交流的</p><p>目前发现当前端进行刷新的时候，前端应该是关闭连接了，但是房间中的人数却没有发生变化，说明后端是没有删除 consumer 对象的</p><p>上面应该是 vue 热加载的缘故，当手动关闭连接的时候，后端的 websocket_disconnect 是正常运作，删除关闭连接的对象的</p><p>如果我能创建带有类名的元素，</p><p>对于统计用户时长，在进入页面的时候拿到当前时间并保存到 token 中，在关闭页面的时候拿到当前时间</p><p>数据库那里怎么保存用户时长呢？<br>数据库建立 8 个字段，分别为用户 id，周日～周六的在线时长</p><p>我在前端这里拿到的是在线时长，发送到后端的话包括今天是星期几，</p><p>用户一天内可以有多次登录系统，这些时长应该被累加起来，但是在数据库中还保存有上一个星期的时间统计？难道要人为清除？</p><p>在每个分钟的 0 秒发送一个字段到后端，后端检测到有几个这种字段，就是用户在线了几分钟</p><p>每分钟的 0 秒前端发送一个特殊字段到后端<br>后端收到以后，把数据库里的在线时长（分钟）字段 + 1<br>在线时长用 int 存储<br>单位是分钟<br>一天内甭管登录多少次都是正常累加的<br>所以后端还需要保存一个 “last modified” 字段<br>来记录上一次修改这个 int 存储的在线时长的时间<br>如果发现上次修改在线时长已经是 1 天前了，清零</p><p>用 post 方式，</p><p>前端对该数据库有两种请求</p><ul><li>获取这一个星期的数据</li><li>更新这一天的数据</li></ul><p>用户进入首页的时候，首页请求用户的在线时长数据，</p><p>用户登录之后，在 NewIndex 页面中，每隔一分钟就发送数据</p><p>两个都使用 post 方法，那么就要用 id 字段来进行区分。</p><p>获取数据<br>id: 0<br>user_id: number</p><p>更新这一天的数据<br>id: 1<br>user_id: number<br>day: number</p><p>如果在获取或更新的时候在数据库中没有该 user_id 的数据，则先创建一条</p><h3 id="注册"><a class="anchor" href="#注册">#</a> 注册</h3><h4 id="验证码功能"><a class="anchor" href="#验证码功能">#</a> 验证码功能</h4><p>在仅输入邮箱的情况下，可以将邮箱发送到后端，后端返回发送信息给前端，如果前端根据返回信息检测到邮箱发送失败，则提示用户检查邮箱是否输入正确。</p><p>对于时间戳，不用进行年月日，时分秒转换。只要比较两个时间戳的差值就行了</p><p>设置一个全局字典，保存键值对<br>邮箱 -》 验证码 + 时间戳</p><p>拿到邮箱之后，先检查该邮箱是否在全局字典中，如果在全局字典中，检查时间是否超过 60 秒。如果超过则重新生成验证码并发送，如果没有超过则返回剩余给前端，前端再提醒。</p><p>如果发送失败则返回邮箱可能不正确的信息给前端，前端再提醒</p><p>表单验证中，增加验证码字段</p><p>设置不为空即可。</p><p>设置每个邮箱只能注册一次</p><p>那就还要加上用户的注销</p><h3 id="全局用上人脸检测功能"><a class="anchor" href="#全局用上人脸检测功能">#</a> 全局用上人脸检测功能</h3><p>建立全局变量存储</p><h3 id="解决人脸检测宽度和高度问题"><a class="anchor" href="#解决人脸检测宽度和高度问题">#</a> 解决人脸检测宽度和高度问题</h3><p>如果实现设定高度的话，那么页面在缩放时会产生问题</p><p>查看别人的网站可以知道，当浏览器的缩放比例为 100% 时，页面正好完全显示，当把页面放得更大的时候或者浏览器的窗口变小的时候，浏览器的窗口内是出现滚动条的</p><p>vh、vw 是根据浏览器窗口设置比例的，就不能使用了</p><p>如果直接用 px 作为高度和宽度的单位，那么当高度和宽度超过浏览器的大小的时候，会自动出现滚动条。</p><p>但是，这样子做的话，在手机界面上打开就相当于缩小的浏览器，就会出现界面的不适配。</p><h3 id="跨域问题解决"><a class="anchor" href="#跨域问题解决">#</a> 跨域问题解决</h3><h4 id="访问公开的接口"><a class="anchor" href="#访问公开的接口">#</a> 访问公开的接口</h4><p>当在本机上运行的时候，可以正常访问到公开的接口</p><p><span class="exturl" data-url="aHR0cHM6Ly90ZW5hcGkuY24vemhpaHVyZXNvdS8=">https://tenapi.cn/zhihuresou/</span></p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664927992566.png" alt="1664927992566"></p><p>在虚拟机访问网页也是可以访问公开的接口的</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664928352090.png" alt="1664928352090"></p><h4 id="访问自己写的接口"><a class="anchor" href="#访问自己写的接口">#</a> 访问自己写的接口</h4><p>在本机上运行可以正常访问</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664928645749.png" alt="1664928645749"></p><p>在虚拟机上访问时出错</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664928731872.png" alt="1664928731872"></p><p>此时后端没有收到任何响应，推测是前端代码或者浏览器的问题</p><p>已拦截跨源请求：同源策略禁止读取位于 <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4ODQwL2xvZ2luLw==">http://127.0.0.1:8840/login/</span> 的远程资源。（原因：CORS 请求未能成功）。</p><h3 id="尝试解决"><a class="anchor" href="#尝试解决">#</a> 尝试解决</h3><p>上面两个请求一个 https、一个是 http。推测是浏览器自动拦截了 http 的请求</p><p>后来尝试了</p><h3 id="目前解决方案"><a class="anchor" href="#目前解决方案">#</a> 目前解决方案</h3><p>使用 zerotier 内网穿透，得到本机的内网地址，之后访问网页和请求都是向这个网址</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664931877217.png" alt="1664931877217"></p><p>django 后端 runserver 0.0.0.0:8840，并在 drfdemo（项目名）的 setting.py 中 <code>ALLOWED_HOSTS = ['10.241.126.172']</code></p><p>在本机上运行可以正常访问</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664931547971.png" alt="1664931547971"></p><p>在虚拟机上也可以正常访问了（自己的接口和公开的 https 接口）</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664931807604.png" alt="1664931807604"></p><p>但值得注意的时，这时候访问网页的网址不再是 vue ui 中输出的地址了，而是 zerotier 中创建的地址</p><h3 id="浏览器的摄像头问题"><a class="anchor" href="#浏览器的摄像头问题">#</a> 浏览器的摄像头问题</h3><p>通过内网穿透访问摄像头时出现错误，但是之前不使用内网穿透访问摄像头时没有出错，说明不是浏览器的版本之类的问题</p><p><img data-src="/./images/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/1664932054401.png" alt="1664932054401"></p><p>No navigator.mediaDevices.getUserMedia exists.</p><hr><p><span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDAwL3Rhc2tzL0Q6JTVDUHJvamVjdHMlNUN2dWVfcHJvamVjdHMlNUN0ZXN0cGlhbmElNUN0ZXN0MzpzZXJ2ZQ==">http://localhost:8000/tasks/D:\Projects\vue_projects\testpiana\test3:serve</span></p><h2 id="界面设计调整"><a class="anchor" href="#界面设计调整">#</a> 界面设计调整</h2><h3 id="我的笔记"><a class="anchor" href="#我的笔记">#</a> 我的笔记</h3><p>两个部分的内容所占的 px 是固定的，不应该使用浏览器窗口作为宽度单位</p><p>在 LoginRegister 中，最外层的 div（类名为 container）设置宽度为 100% 了，应该是撑满整个父盒子的意思，但是在窗口的大小变化的时候（浏览器的窗口大小变化），它的高度和宽度是会发生变化的</p><p>怎样才能将 container 的高度和宽度设置为浏览器能打开的最大高度和宽度呢？</p><p>目前给 container 设置了 min-width，这样在宽度缩小到一定的宽度时会出现的滚动条。</p><p>但是继续缩小时，整个动画笑话就会乱掉。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-row</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>                        <span class="token comment">&lt;!-- &lt;el-col :span="2" style="text-align:center;line-height: 10vh;"> --></span></pre></td></tr><tr><td data-num="4"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/NewIndex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/robot.png<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span> bolder<span class="token punctuation">;</span><span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span> larger<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>cornflowerblue<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>AI学习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>green</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>助手<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>19<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span>right<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>success<span class="token punctuation">"</span></span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SwitchButton<span class="token punctuation">"</span></span> <span class="token attr-name">round</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logOut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-row</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0NzY3MDkxL2FydGljbGUvZGV0YWlscy8xMTkzODUyMDY=">https://blog.csdn.net/qq_24767091/article/details/119385206</span></p><div class="tags"><a href="/tags/%E8%BD%AF%E5%B7%A5/" rel="tag"><i class="ic i-tag"></i> 软工</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-10-11 08:38:47" itemprop="dateModified" datetime="2022-10-11T08:38:47+08:00">2022-10-11</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="yuan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="yuan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="yuan 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>yuan <i class="ic i-at"><em>@</em></i>yuan</li><li class="link"><strong>本文链接：</strong> <a href="https://huang-junyuan.github.io/2022/09/19/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/" title="整体设计--软工">https://huang-junyuan.github.io/2022/09/19/computer-science/base/软件工程/整体设计/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/09/18/frontend/mediapine-vue/%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(7).webp" title="人脸检测"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> mediapipe-vue</span><h3>人脸检测</h3></a></div><div class="item right"><a href="/2022/09/21/frontend/mediapine-vue/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(58).webp" title="手势识别"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> mediapipe-vue</span><h3>手势识别</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">用户的数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2"><span class="toc-number">2.</span> <span class="toc-text">登录界面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">2.1.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-2"><span class="toc-number">2.2.</span> <span class="toc-text">登录界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">技术点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%8A%9F%E8%83%BD%E7%95%8C%E9%9D%A2"><span class="toc-number">3.</span> <span class="toc-text">主功能界面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%9A%84%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83"><span class="toc-number">3.1.</span> <span class="toc-text">用户的个人中心</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%95%E5%85%A5%E4%BA%BA%E8%84%B8"><span class="toc-number">3.1.1.</span> <span class="toc-text">录入人脸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%BA%E8%84%B8%E5%BA%93%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">3.1.2.</span> <span class="toc-text">人脸库的处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%BA%E8%84%B8%E7%99%BB%E5%BD%95"><span class="toc-number">3.1.3.</span> <span class="toc-text">人脸登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%9B%9E%E5%AF%86%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="toc-number">3.1.4.</span> <span class="toc-text">找回密码功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%9A%84%E4%B8%AA%E6%80%A7%E5%8C%96%E5%8A%9F%E8%83%BD%E5%A6%82%E5%90%8D%E5%AD%97%E4%B9%8B%E7%B1%BB%E7%9A%84%E5%8F%82%E8%80%83%E5%85%B6%E4%BB%96%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.1.5.</span> <span class="toc-text">其他的个性化功能如名字之类的参考其他设计</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#md%E7%BC%96%E8%BE%91"><span class="toc-number">3.2.</span> <span class="toc-text">md 编辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E4%B9%A0%E5%AE%A4%E8%81%8A%E5%A4%A9%E5%AE%A4"><span class="toc-number">3.3.</span> <span class="toc-text">自习室（聊天室）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E5%A7%BF%E6%96%B9%E9%9D%A2"><span class="toc-number">3.4.</span> <span class="toc-text">坐姿方面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%BF%E5%88%87%E6%8D%A2ppt"><span class="toc-number">3.5.</span> <span class="toc-text">手势切换 PPT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E5%8A%A8%E5%A7%BF%E6%80%81"><span class="toc-number">3.6.</span> <span class="toc-text">运动姿态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nlp%E9%A2%86%E5%9F%9F%E7%9A%84%E6%88%91%E4%B8%8D%E6%98%AF%E5%BE%88%E6%95%A2%E7%A1%AE%E5%AE%9Agpt%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E5%81%9A%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90%E7%9A%84%E5%83%8F%E8%BE%85%E5%8A%A9%E7%90%86%E8%A7%A3%E4%B9%8B%E7%B1%BB%E7%9A%84%E5%BA%94%E8%AF%A5%E6%9C%89%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.7.</span> <span class="toc-text">nlp 领域的我不是很敢确定，gpt 可以用来做文本生成的，像辅助理解之类的应该有模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#summarize"><span class="toc-number">3.8.</span> <span class="toc-text">summarize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90"><span class="toc-number">3.9.</span> <span class="toc-text">文本生成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%BA%E8%84%B8%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">人脸模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E8%84%B8%E5%AF%B9%E9%BD%90"><span class="toc-number">4.1.</span> <span class="toc-text">人脸对齐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86"><span class="toc-number">4.2.</span> <span class="toc-text">框</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nlp%E6%A8%A1%E5%9D%97"><span class="toc-number">5.</span> <span class="toc-text">nlp 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%BB%AD%E5%86%99"><span class="toc-number">5.1.</span> <span class="toc-text">文章续写</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uergpt2-chinese-cluecorpussmall"><span class="toc-number">5.1.1.</span> <span class="toc-text">uer&#x2F;gpt2-chinese-cluecorpussmall</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E5%BC%8Fqa"><span class="toc-number">5.2.</span> <span class="toc-text">提取式 QA</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uerroberta-base-chinese-extractive-qa"><span class="toc-number">5.2.1.</span> <span class="toc-text">uer&#x2F;roberta-base-chinese-extractive-qa</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%97%E6%AD%8C%E7%94%9F%E6%88%90"><span class="toc-number">5.3.</span> <span class="toc-text">诗歌生成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uergpt2-chinese-lyric"><span class="toc-number">5.3.1.</span> <span class="toc-text">uer&#x2F;gpt2-chinese-lyric</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uergpt2-chinese-poem"><span class="toc-number">5.3.2.</span> <span class="toc-text">uer&#x2F;gpt2-chinese-poem</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%91%98%E8%A6%81"><span class="toc-number">5.4.</span> <span class="toc-text">摘要</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#csebuetnlpmt5_m2o_chinese_simplified_crosssum"><span class="toc-number">5.4.1.</span> <span class="toc-text">csebuetnlp&#x2F;mT5_m2o_chinese_simplified_crossSum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#idea-ccnlrandeng-pegasus-238m-summary-chinese"><span class="toc-number">5.4.2.</span> <span class="toc-text">IDEA-CCNL&#x2F;Randeng-Pegasus-238M-Summary-Chinese</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3%E4%B8%AD%E6%96%87%E5%92%8C%E6%96%87%E8%A8%80%E6%96%87%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-number">5.5.</span> <span class="toc-text">现代中文和文言文的翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#raynardjwenyanwen-chinese-translate-to-ancient"><span class="toc-number">5.5.1.</span> <span class="toc-text">raynardj&#x2F;wenyanwen-chinese-translate-to-ancient</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">5.6.</span> <span class="toc-text">环境配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E7%AF%87"><span class="toc-number">6.</span> <span class="toc-text">界面设计篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C"><span class="toc-number">6.1.</span> <span class="toc-text">注册</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="toc-number">6.1.1.</span> <span class="toc-text">验证码功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%94%A8%E4%B8%8A%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B%E5%8A%9F%E8%83%BD"><span class="toc-number">6.2.</span> <span class="toc-text">全局用上人脸检测功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B%E5%AE%BD%E5%BA%A6%E5%92%8C%E9%AB%98%E5%BA%A6%E9%97%AE%E9%A2%98"><span class="toc-number">6.3.</span> <span class="toc-text">解决人脸检测宽度和高度问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-number">6.4.</span> <span class="toc-text">跨域问题解决</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%85%AC%E5%BC%80%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.4.1.</span> <span class="toc-text">访问公开的接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.4.2.</span> <span class="toc-text">访问自己写的接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95%E8%A7%A3%E5%86%B3"><span class="toc-number">6.5.</span> <span class="toc-text">尝试解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%89%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.6.</span> <span class="toc-text">目前解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E9%97%AE%E9%A2%98"><span class="toc-number">6.7.</span> <span class="toc-text">浏览器的摄像头问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E8%B0%83%E6%95%B4"><span class="toc-number">7.</span> <span class="toc-text">界面设计调整</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0"><span class="toc-number">7.1.</span> <span class="toc-text">我的笔记</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/2022/09/19/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1/" rel="bookmark" title="整体设计--软工">整体设计--软工</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="yuan" data-src="/images/avatar.jpg"><p class="name" itemprop="name">yuan</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">222</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">47</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">39</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item email" data-url="bWFpbHRvOjIwODM2MzU1MjVAcXEuY29t" title="mailto:2083635525@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/09/18/frontend/mediapine-vue/%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/09/21/frontend/mediapine-vue/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2022/11/01/computer-science/%E9%AB%98%E7%BA%A7%E8%BD%AF%E8%80%83/%E6%A1%88%E4%BE%8B/2019/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/csp/" title="分类于 csp">csp</a></div><span><a href="/2022/08/24/computer-science/algorithm/csp/2%E9%A2%98/202012-2-%E6%9C%9F%E6%9C%AB%E9%A2%84%E6%B5%8B%E4%B9%8B%E6%9C%80%E4%BD%B3%E9%98%88%E5%80%BC/" title="202012-2-期末预测之最佳阈值">202012-2-期末预测之最佳阈值</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/backend/" title="分类于 后端">后端</a> <i class="ic i-angle-right"></i> <a href="/categories/backend/spring/" title="分类于 spring">spring</a></div><span><a href="/2022/11/12/backend/Spring/spring_day02/Spring_day02/" title="Spring_day02">Spring_day02</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/frontend/" title="分类于 前端">前端</a> <i class="ic i-angle-right"></i> <a href="/categories/frontend/Node-js/" title="分类于 Node.js">Node.js</a></div><span><a href="/2022/09/08/frontend/Node/Express/" title="Express">Express</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/tools/" title="分类于 tools">tools</a></div><span><a href="/2022/07/26/tools/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90kgm%E6%A0%BC%E5%BC%8F%E8%BD%ACmp3%E6%A0%BC%E5%BC%8F/" title="酷狗音乐kgm格式转mp3格式">酷狗音乐kgm格式转mp3格式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/" title="分类于 nlp">nlp</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/" title="分类于 huggingface">huggingface</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/Tokenizer%E5%BA%93/" title="分类于 Tokenizer库">Tokenizer库</a></div><span><a href="/2022/11/12/ai/nlp/huggingface/Tokenizers%E5%BA%93/BPE/" title="Byte-Pair Encoding tokenization">Byte-Pair Encoding tokenization</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/09/27/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E4%BB%BB%E5%8A%A1%E6%96%87%E6%A1%A3/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/" title="分类于 nlp">nlp</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/" title="分类于 huggingface">huggingface</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/%E4%B8%BB%E8%A6%81nlp%E4%BB%BB%E5%8A%A1/" title="分类于 主要nlp任务">主要nlp任务</a></div><span><a href="/2022/11/12/ai/nlp/huggingface/%E4%B8%BB%E8%A6%81%E7%9A%84%20NLP%20%E4%BB%BB%E5%8A%A1/%E6%96%87%E6%9C%AC%E6%91%98%E8%A6%81Summarization/" title="文本摘要 summarize">文本摘要 summarize</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 computer-science">computer-science</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href="/2022/08/24/computer-science/base/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E5%90%88%E9%9B%86/" title="组原合集">组原合集</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/12/07/computer-science/%E6%9C%8D%E5%8A%A1%E5%A4%96%E5%8C%85%E5%A4%A7%E8%B5%9B/%E5%87%86%E5%A4%87%E6%96%87%E6%A1%A3/" title="未命名">未命名</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">yuan @ Mi Manchi</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.6m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">23:49</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/09/19/computer-science/base/软件工程/整体设计/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>