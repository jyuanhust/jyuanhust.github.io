<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="yuan" href="https://jyuanhust.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="yuan" href="https://jyuanhust.github.io/atom.xml"><link rel="alternate" type="application/json" title="yuan" href="https://jyuanhust.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="django"><link rel="canonical" href="https://jyuanhust.github.io/2022/08/25/backend/django/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django/"><title>文件上传-django - django - 后端 | Mi Manchi = yuan = Whatever is worth doing at all is worth doing well</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">文件上传-django</h1><div class="meta"><span class="item" title="创建时间：2022-08-25 11:49:50"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-08-25T11:49:50+08:00">2022-08-25</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>16k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>15 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Mi Manchi</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(40).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(97).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(66).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(15).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(26).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(32).webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/backend/" itemprop="item" rel="index" title="分类于 后端"><span itemprop="name">后端</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/backend/django/" itemprop="item" rel="index" title="分类于 django"><span itemprop="name">django</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jyuanhust.github.io/2022/08/25/backend/django/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="yuan"><meta itemprop="description" content="Whatever is worth doing at all is worth doing well, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="yuan"></span><div class="body md" itemprop="articleBody"><h1 id="文件上传-django"><a class="anchor" href="#文件上传-django">#</a> 文件上传 - Django</h1><h2 id="1知识点复习"><a class="anchor" href="#1知识点复习">#</a> 1. 知识点复习</h2><h3 id="11-基础入门"><a class="anchor" href="#11-基础入门">#</a> 1.1 基础入门</h3><ul><li><p>编码</p><pre><code>编码基础知识点：utf-8、unicode、gbk、ascii
默认解释器编码：
	- Python2：ascii（ # -*- coding:utf-8 -*- )
	- Python3：utf-8（重要）
</code></pre></li><li><p>输入和输出</p><pre><code>print
input，用户输入的永远是字符串类型。

data = input(&quot;请输入序号：&quot;) # 1
print(data) # &quot;1&quot;
</code></pre></li><li><p>变量</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>规范：字母、数字、下划线；数字不能开头；不能是py内置关键字。</pre></td></tr><tr><td data-num="2"></td><td><pre>建议：</pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token operator">-</span> 见名知意</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token operator">-</span> 多个单词，用下划线连接。</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token operator">-</span> 全局变量用大写（ DATA_LIST、USER_INFO  ）；局部变量小写（user_age）。</pre></td></tr><tr><td data-num="6"></td><td><pre>    </pre></td></tr><tr><td data-num="7"></td><td><pre>注意：</pre></td></tr><tr><td data-num="8"></td><td><pre>	全局变量    GET_INFO</pre></td></tr><tr><td data-num="9"></td><td><pre>    局部变量    get_info</pre></td></tr><tr><td data-num="10"></td><td><pre>	函数名      get_info</pre></td></tr><tr><td data-num="11"></td><td><pre>    类名        GetInfo</pre></td></tr><tr><td data-num="12"></td><td><pre>    文件名      get_info</pre></td></tr><tr><td data-num="13"></td><td><pre>    包名称      get_info</pre></td></tr></table></figure></li><li><p>异常处理【补充】</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>data <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入："</span><span class="token punctuation">)</span>  <span class="token comment"># 你好</span></pre></td></tr><tr><td data-num="2"></td><td><pre>res <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 这个代码是有风险，可能会报错。</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"开始"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">try</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    data <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入："</span><span class="token punctuation">)</span>  <span class="token comment"># 123  / 你好</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    res <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"出错了"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"结束"</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>循环中 for/while 内部都可以用 break、continue</p></li><li><p>字符串格式化</p><pre><code>data = &quot;我是&#123;&#125;，姓名是&#123;&#125;，年龄是&#123;&#125;&quot;.format(&quot;xx&quot;,123,999)

data = &quot;我是&#123;0&#125;，姓名是&#123;1&#125;，年龄是&#123;2&#125;&quot;.format(&quot;xx&quot;,123,999)

data = &quot;我是&#123;0&#125;，姓名是&#123;0&#125;，年龄是&#123;2&#125;&quot;.format(&quot;xx&quot;,123)
</code></pre></li><li><p>运算符</p><pre><code>- 传统的运算符
- 逻辑运算符
	- 常见操作，最终的到的结果：True/False
		if 1&gt;10 and 9&lt;8:
			pass
		else:
			pass
	- 非传统，最终的结果是：第一个或第二个值。
		data = 值1 and 值2
		v1 = 5 and 9  # 9
		v2 = 0 and 10 # 0
</code></pre></li></ul><h3 id="12-数据类型"><a class="anchor" href="#12-数据类型">#</a> 1.2 数据类型</h3><ul><li><p>字符串类型</p><pre><code>- 不可变类型；
- 常见方法：strip/split/replace/join
	v1 = &quot;root&quot;
	data = v1.upper()
	print(v1)   # root
	print(data) # ROOT
	
- 公共：索引、切片、循环
	v1 = &quot;root&quot;
	v1[1] = &quot;X&quot;  # 报错，不可变
</code></pre></li><li><p>列表类型</p><pre><code>- 可变类型
- 常见方法：append/insert/pop/remove
- 公共：索引、切片、循环
	v1 = [11,22,33,44,55]
	
	v1[0]
	v1[1:3]      - 前取后不取
	v1[1:-1]
- 列表的推导式
	data = [ i for i in range(10)]
	data = [ i for i in range(10) if i&lt;5]
</code></pre></li><li><p>字典类型</p><pre><code>- 可变类型
- 字典的键是有要求：可哈希类型，目前不可哈希：list/dict/set。
- 扩展：python3.6+字典有序。
- 常见的功能：keys、values、items、get
	data = &#123;&#125;
	v1 = data.get(&quot;k1&quot;)
</code></pre></li><li><p>关于元组</p><pre><code>v1 = (11,)
v2 = (11)   # 11
v3 = 11
</code></pre></li><li><p>其他数据类型</p><pre><code>其他类型转布尔类型时，哪些为False： 空、0、None
其他类型转自己类型时，自己的类名()
	int(&quot;123&quot;)
</code></pre></li></ul><h3 id="13-函数"><a class="anchor" href="#13-函数">#</a> 1.3 函数</h3><ul><li><p>定义</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">pass</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>func<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>参数</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">pass</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">pass</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">pass</span></pre></td></tr></table></figure></li><li><p>返回值</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">-</span> 没有返回值，默认返回<span class="token boolean">None</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">-</span> 一个返回值</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">123</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    </pre></td></tr><tr><td data-num="8"></td><td><pre>    res <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># 123</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">-</span> 多个返回值</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">,</span><span class="token number">123</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    </pre></td></tr><tr><td data-num="15"></td><td><pre>    res <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># (123,999,123)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    </pre></td></tr><tr><td data-num="18"></td><td><pre>    </pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">,</span><span class="token number">123</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre>    d1<span class="token punctuation">,</span>d2<span class="token punctuation">,</span>c3 <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>v1<span class="token punctuation">,</span>v2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>v1<span class="token punctuation">,</span>v2<span class="token punctuation">,</span>v3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>lambda 表达式（匿名函数）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">100</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>func <span class="token operator">=</span> <span class="token keyword">lambda</span> arg<span class="token punctuation">:</span>arg<span class="token operator">+</span><span class="token number">100</span></pre></td></tr><tr><td data-num="5"></td><td><pre>v1 <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span> <span class="token comment"># 200</span></pre></td></tr></table></figure></li><li><p>内置函数</p><pre><code>max/min/all/any/help/hex/oct/bin..

open，文件操作。
    f = open(&quot;xx.log&quot;,mode='r')
    data = f.read()
    f.close()
</code></pre></li><li><p>文件操作</p><pre><code>- 模式：r/w/a ； rb/wb/ab
- 打开 &amp; 关闭
	with open(&quot;xx.log&quot;,mode='r') as f:
		f.read()
</code></pre></li></ul><h3 id="14-模块"><a class="anchor" href="#14-模块">#</a> 1.4 模块</h3><ul><li><p>分类</p><pre><code>- 自定义模块：自己写文件/文件夹
- 内置模块：time/datetime/json/hashlib/random/re等
- 第三方模块：openpyxl/requests/bs4/flask/django等
</code></pre></li><li><p>自定义模块</p><pre><code>- sys.path，Python内部导入模块时，根据目录去寻找。
- 一定不要让自己写的模块名和内置的模块名重复（***）
- 导入模块：
	import xxx
	from xxx import xxx
</code></pre></li><li><p>内置模块</p><pre><code>- 时间部分：time/datetime/字符串类型。
- random：随机生成数字。
- hashlib：加密（md5加密、md5加密+加盐） 防止被撞库。
- json：
	- JSON格式的字符串： 内部字符串双引号、内部[] 
	- json.dumps
	- json.loads
- re和正则
	- 正则：\d \w ; 贪婪匹配。
	- re.search/re.match/      re.findall
</code></pre></li><li><p>第三方模块</p><pre><code>- 安装第三方模块：pip、源码、wheel
- 常见第三方模块：
	- requests
	- bs4
	- openpyxl
	- python-docx
	- flask/django （flask简洁（轻量级）；django功能强大）
</code></pre></li></ul><h3 id="15-面向对象"><a class="anchor" href="#15-面向对象">#</a> 1.5 面向对象</h3><pre><code>- 面向对象的三大特性：封装、继承、多态。
- 理解，读懂源码和代码。
</code></pre><h3 id="16-mysql数据库"><a class="anchor" href="#16-mysql数据库">#</a> 1.6 MySQL 数据库</h3><pre><code>- 数据库
- 表
- 数据行
更多知识：https://www.bilibili.com/video/BV15R4y1b7y9
</code></pre><pre><code>show databases;
use 数据库;

show tables;
desc 表名;

select * from 表;
insert into 表(列,列,列)values(...)
update  表 set 列=值;
delete from 表 where 条件;
</code></pre><p>Python 连接并操作 MySQL：</p><ul><li><p>pymysql 【自己原生写】</p><pre><code>pip install pymysql
</code></pre></li><li><p>mysqlclient 【django 内部】</p><pre><code>pip install mysqlclient
</code></pre></li><li><p>MySQLdb （默认不支持 python3）</p><pre><code>pip intall MySQLdb
</code></pre></li></ul><p>当使用 Python 代码去操作 MySQL 时，一定要防止 SQL 注入的问题。</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># SQL 语句不要用字符串格式化去拼接。</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> pymysql</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 1. 连接 MySQL</span></pre></td></tr><tr><td data-num="5"></td><td><pre>conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span> user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">"root123"</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">'unicom'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>cursor<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 【错误】不要这么写</span></pre></td></tr><tr><td data-num="9"></td><td><pre>sql <span class="token operator">=</span> <span class="token string">"select * from admin where id > %s"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 【正确】这么写</span></pre></td></tr><tr><td data-num="12"></td><td><pre>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from admin where id > %s"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># 获取符合条件的第一条数据，字典    None</span></pre></td></tr><tr><td data-num="15"></td><td><pre>res <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment"># &#123;'id': 3, 'username': ' 集宁 ', 'password': 'qwe123', 'mobile': '1999999999'&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># 3. 关闭连接</span></pre></td></tr><tr><td data-num="19"></td><td><pre>cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="17-前端开发"><a class="anchor" href="#17-前端开发">#</a> 1.7 前端开发</h3><ul><li><p>HTML</p><pre><code>- 块级和行内标签（div、span）
	块级：div/h系列
	行内：span/a （设置高度、宽度、边距无效）
- Form表单
	&lt;form method=&quot;post&quot; action=&quot;地址&quot;&gt; 
		&lt;input ....
		
		&lt;input type='submit' ... /&gt;
	&lt;/form&gt;
	
- 关于a标签
	&lt;a href=&quot;www.baidu.com&quot;&gt;百度&lt;/a&gt;   超链接去跳转。
	做锚点
        &lt;a href=&quot;#m1&quot;&gt;第一章&lt;/a&gt;
        &lt;a href=&quot;#m2&quot;&gt;第二章&lt;/a&gt;
        &lt;div id=&quot;m1&quot; style=&quot;height: 1000px;&quot;&gt;第一章 谢新雪&lt;/div&gt;
        &lt;div id=&quot;m2&quot; style=&quot;height: 1000px;&quot;&gt;第二章 单独的&lt;/div&gt;
</code></pre></li><li><p>CSS</p><pre><code>- 位置
	- 标签 &lt;div style=&quot;xxx&quot;&gt;
	- style代码块
		&lt;style&gt;
			div &#123; &#125;
			#v1 &#123; &#125;
			.v2 &#123;&#125;
		&lt;/style&gt;
	- 文件中
	
- 选择器
	div &#123; &#125;
	#v1 &#123; &#125;
	.v2 &#123; &#125;
	div[xx='11'] &#123; &#125;
	
- 样式
	color;fonts-ize; background-color; padding; margin;
	float:left; ,脱离文档流。 clear:both; :after
</code></pre></li><li><p>JavaScript &amp; jQuery</p><pre><code>- 本质上：找到标签；操作标签。

- 找标签
	$(&quot;#x1&quot;)
	$(&quot;.x1&quot;)
	$(&quot;div&quot;)
	
	$(&quot;input[type='text']&quot;)   找到 input 标签且 type='text'
- 操作标签
	$(&quot;#x1&quot;).text()            &lt;div id='x1'&gt;dd&lt;/div&gt;
	$(&quot;#x1&quot;).text(&quot;xxx&quot;)       &lt;div id='x1'&gt;xxx&lt;/div&gt;
	
	$(&quot;#x1&quot;).val()             &lt;input id='x1' /&gt;
	$(&quot;#x1&quot;).val(&quot;xxx&quot;)        &lt;input id='x1' /&gt;
	
	$(&quot;#x1&quot;).attr(&quot;uu&quot;)           &lt;div id='x1' uu=&quot;123&quot;&gt;dd&lt;/div&gt;
	$(&quot;#x1&quot;).attr(&quot;uu&quot;,&quot;999&quot;)     &lt;div id='x1' uu=&quot;999&quot;&gt;dd&lt;/div&gt;
	
	$(&quot;#x1&quot;).empty()          &lt;div id='x1'&gt;dd&lt;/div&gt;  - 清空内容
	$(&quot;#x1&quot;).remove()         &lt;div id='x1'&gt;dd&lt;/div&gt;  - 整个标签删除
</code></pre></li><li><p>BootStrap</p><pre><code>- 支持响应式布局，根据屏幕的宽度调整布局。
- 栅格，12份。
- 常见的样式：
	- container  / container-fluid
	- 面板
	- 按钮
	- 表单
	- 表格
	- 对话框
</code></pre></li><li><p>第三方插件</p><pre><code>- 插件一般都包含：CSS、JavaScript，开发使用时候
	- 引入css、js（依赖jQuery）
	- 使用
</code></pre></li><li><p>关于注释</p><pre><code>- Python语言
	# 注释
    &quot;&quot;&quot; 注释 &quot;&quot;&quot;
- HTML
	&lt;!-- --&gt;
    
- CSS注释
	/* 注释 */
    
- JavaScript
	// 注释
    /* 注释 */
</code></pre></li></ul><h3 id="18-django"><a class="anchor" href="#18-django">#</a> 1.8 Django</h3><ul><li><p>安装</p><pre><code>pip install django
</code></pre><pre><code>python安装目录下：
	- lib/site-packages/django源码包
	- Scripts/django-admin.exe  文件
</code></pre></li><li><p>创建 Django 项目</p><pre><code>&gt;&gt;&gt;django-admin  startproject  项目名
</code></pre></li><li><p>创建 APP</p><pre><code>&gt;&gt;&gt;cd 项目目录
&gt;&gt;&gt;python manange.py startapp app名称
</code></pre></li><li><p>注册 app</p><pre><code>- 不注册，models.py生成数据库表行为不执行。
- 不注册，模板文件、静态文件，不回去app目录下找。
</code></pre></li><li><p>static 目录，静态文件目录</p></li><li><p>templates 目录，模板文件目录（HTML）</p></li><li><p>表结构设计 app01/modes.py 下执行</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    v1 <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr></table></figure><pre><code>&gt;&gt;&gt;python manage.py makemigrations
&gt;&gt;&gt;python manage.py migrate
</code></pre></li><li><p><span class="exturl" data-url="aHR0cDovL3VybHMucHk=">urls.py</span> 中编写路由。</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span>re_path</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> app01 <span class="token keyword">import</span> admin</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    path<span class="token punctuation">(</span><span class="token string">'admin/list/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_list<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    path<span class="token punctuation">(</span><span class="token string">'admin/&lt;int:nid>/delete/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_delete<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    re_path<span class="token punctuation">(</span><span class="token string">'admin/(?P&lt;nid>\d+)/delete/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_delete<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure></li><li><p>视图函数</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">admin_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    k1 <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 业务处理</pre></td></tr><tr><td data-num="5"></td><td><pre>    </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> 数据</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">-</span> 默认参数request，包含请求相关的所有数据。</pre></td></tr><tr><td data-num="9"></td><td><pre>	request<span class="token punctuation">.</span>method</pre></td></tr><tr><td data-num="10"></td><td><pre>    request<span class="token punctuation">.</span>GET</pre></td></tr><tr><td data-num="11"></td><td><pre>    request<span class="token punctuation">.</span>POST</pre></td></tr><tr><td data-num="12"></td><td><pre>    request<span class="token punctuation">.</span>FILES，上传文件。</pre></td></tr><tr><td data-num="13"></td><td><pre>    request<span class="token punctuation">.</span>path_info，获取当前请求的URL</pre></td></tr><tr><td data-num="14"></td><td><pre>    	http<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>depart<span class="token operator">/</span>add<span class="token operator">/</span>  <span class="token operator">-</span><span class="token operator">></span>    <span class="token operator">/</span>depart<span class="token operator">/</span>add<span class="token operator">/</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                </pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">-</span> 返回值</pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"字符串"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span> <span class="token punctuation">&#123;</span><span class="token string">"status"</span><span class="token punctuation">:</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">"data"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">456</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span> <span class="token punctuation">,</span>safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">"xxx.html"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>值<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8000/depart/add/"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"/depart/add/"</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>数据库的 ORM 操作</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 增加</span></pre></td></tr><tr><td data-num="2"></td><td><pre>models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>obj<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>obj_list <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    。。。</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>bulk_create<span class="token punctuation">(</span>obj_list<span class="token punctuation">,</span>batch_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 查询</span></pre></td></tr><tr><td data-num="2"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>         <span class="token comment"># [obj,obj,]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment"># []</span></pre></td></tr><tr><td data-num="4"></td><td><pre>obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># obj / None</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gte<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__lt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__lte<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name__contains<span class="token operator">=</span><span class="token string">"中国"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>  <span class="token comment"># id !=9</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"-id"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"-id"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 更新</span></pre></td></tr><tr><td data-num="2"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"武沛齐"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span></pre></td></tr><tr><td data-num="9"></td><td><pre>obj<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 删除</span></pre></td></tr><tr><td data-num="2"></td><td><pre>models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><pre><code>整理的所有ORM操作：
	https://www.cnblogs.com/wupeiqi/articles/6216618.html
</code></pre></li><li><p>Form 和 ModelForm 组件</p><pre><code>- 自动生成HTML标签
- 对用户请求的数据进行校验
	- 自动保存到数据库（ModelForm）
- 错误信息
</code></pre><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django <span class="token keyword">import</span> forms</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UserForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    xx <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    </pre></td></tr><tr><td data-num="6"></td><td><pre>    </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        model <span class="token operator">=</span> models<span class="token punctuation">.</span>类</pre></td></tr><tr><td data-num="10"></td><td><pre>        fields <span class="token operator">=</span> <span class="token string">"__all__"</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>form <span class="token operator">=</span> UserModelForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span>instance<span class="token operator">=</span>对象<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    form<span class="token punctuation">.</span>cleaned_data</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    form<span class="token punctuation">.</span>errors</pre></td></tr></table></figure></li><li><p>关于 POST 提交 CSRF 认证</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>post<span class="token punctuation">'</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &#123;\% csrf_token %&#125;</pre></td></tr><tr><td data-num="3"></td><td><pre>    ...</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>如果想要免除 csrf 认证。</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>csrf <span class="token keyword">import</span> csrf_exempt</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token decorator annotation punctuation">@csrf_exempt</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">def</span> <span class="token function">order_add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">pass</span></pre></td></tr></table></figure></li><li><p>Cookie 和 Session</p><pre><code>cookie，本质上保存在浏览器端的键值对。 
session，保存服务器端（django是将session默认存储在数据库中）

def order_add(request):
    request.session['xx'] = 123
    
def logout(request):
	request.session.clear()
</code></pre></li><li><p>中间件</p><pre><code>- 类 process_request / process_response
- 注册中间件类
    MIDDLEWARE = [
        'django.middleware.security.SecurityMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.common.CommonMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'django.middleware.clickjacking.XFrameOptionsMiddleware',
        'app01.middleware.auth.AuthMiddleware',
    ]
- django请求到达之后，自动会执行相应的方法。

- process_request
	- 没有返回值或返回None，继续向后执行。
	- 返回redirect/render/HttpResponse/JsonReponse，拦截请求不再继续向后之后。
</code></pre></li><li><p>图片验证码</p><pre><code>pip install pillow
</code></pre><pre><code>- 创建图片并在图片上写文字
- 字体文件
- 自定义模块 check_code
</code></pre></li><li><p>分页组件</p><pre><code>开发时候会用。
</code></pre></li></ul><h2 id="2关于文件上传"><a class="anchor" href="#2关于文件上传">#</a> 2. 关于文件上传</h2><h3 id="21-基本操作"><a class="anchor" href="#21-基本操作">#</a> 2.1 基本操作</h3><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &#123;\% csrf_token %&#125;</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> HttpResponse</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">def</span> <span class="token function">upload_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_list.html'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment"># # 'username': ['big666']</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment"># print (request.POST)  # 请求体中数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment"># # &#123;'avatar': [&lt;InMemoryUploadedFile: 图片 1.png (image/png)>]&#125;></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment"># print (request.FILES)  # 请求发过来的文件 &#123;&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"avatar"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment"># print (file_object.name)  # 文件名：WX20211117-222041@2x.png</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_object<span class="token punctuation">.</span>name<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">for</span> chunk <span class="token keyword">in</span> file_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="案例批量上传数据"><a class="anchor" href="#案例批量上传数据">#</a> 案例：批量上传数据</h3><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/depart/multi/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &#123;\% csrf_token %&#125;</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>上传<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-info btn-sm<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">depart_multi</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token triple-quoted-string string">""" 批量删除（Excel文件）"""</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">from</span> openpyxl <span class="token keyword">import</span> load_workbook</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment"># 1. 获取用户上传的文件对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment"># 2. 对象传递给 openpyxl，由 openpyxl 读取文件的内容</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    wb <span class="token operator">=</span> load_workbook<span class="token punctuation">(</span>file_object<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    sheet <span class="token operator">=</span> wb<span class="token punctuation">.</span>worksheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment"># 3. 循环获取每一行数据</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">for</span> row <span class="token keyword">in</span> sheet<span class="token punctuation">.</span>iter_rows<span class="token punctuation">(</span>min_row<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        text <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="15"></td><td><pre>        exists <span class="token operator">=</span> models<span class="token punctuation">.</span>Department<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title<span class="token operator">=</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">if</span> <span class="token keyword">not</span> exists<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            models<span class="token punctuation">.</span>Department<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>title<span class="token operator">=</span>text<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'/depart/list/'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="案例混合数据form"><a class="anchor" href="#案例混合数据form">#</a> 案例：混合数据（Form）</h3><p>提交页面时：用户输入数据 + 文件（输入不能为空、报错）。</p><ul><li>Form 生成 HTML 标签：type=file</li><li>表单的验证</li><li>form.cleaned_data 获取 数据 + 文件对象</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>&#123;\% extends 'layout.html' %&#125;</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>&#123;\% block content %&#125;</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel panel-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-heading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">文件上传-django</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                    &#123;\% csrf_token %&#125;</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>                    &#123;\% for field in form %&#125;</pre></td></tr><tr><td data-num="17"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                            <span class="token comment"></span></pre></td></tr><tr><td data-num="20"></td><td><pre>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>&#123;\&#123; field.errors.0 &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>                    &#123;\% endfor %&#125;</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提 交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>&#123;\% endblock %&#125;</pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django <span class="token keyword">import</span> forms</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapForm</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UpForm</span><span class="token punctuation">(</span>BootStrapForm<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    name <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    age <span class="token operator">=</span> forms<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    img <span class="token operator">=</span> forms<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"头像"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">def</span> <span class="token function">upload_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    title <span class="token operator">=</span> <span class="token string">"Form上传"</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment"># &#123;'name': ' 武沛齐 ', 'age': 123, 'img': &lt;InMemoryUploadedFile: 图片 1.png (image/png)>&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment"># 1. 读取图片内容，写入到文件夹中并获取文件的路径。</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        image_object <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment"># file_path = "app01/static/img/&#123;&#125;".format(image_object.name)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        db_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"static"</span><span class="token punctuation">,</span> <span class="token string">"img"</span><span class="token punctuation">,</span> image_object<span class="token punctuation">.</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"app01"</span><span class="token punctuation">,</span> db_file_path<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> image_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment"># 2. 将图片文件路径写入到数据库</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        models<span class="token punctuation">.</span>Boss<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            name<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            age<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            img<span class="token operator">=</span>db_file_path<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：就目前而言，所有的静态文件都只能放在 static 目录。</p><p>在 django 的开发过程中两个特殊的文件夹：</p><ul><li>static，存放静态文件的路径，包括：CSS、JS、项目图片。</li><li>media，用户上传的数据的目录。</li></ul><h3 id="22-启用media"><a class="anchor" href="#22-启用media">#</a> 2.2 启用 media</h3><p>在 urls.py 中进行配置：</p><pre><code>from django.urls import path, re_path
from django.views.static import serve
from django.conf import settings

urlpatterns = [
	re_path(r'^media/(?P&lt;path&gt;.*)$', serve, &#123;'document_root': settings.MEDIA_ROOT&#125;, name='media'),
]
</code></pre><p>在 settings.py 中进行配置：</p><pre><code>import os

MEDIA_ROOT = os.path.join(BASE_DIR, &quot;media&quot;)
MEDIA_URL = &quot;/media/&quot;
</code></pre><p>在浏览器上访问这个地址：</p><p><img data-src="/./images/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django/image-20211130170639048.png" alt="image-20211130170639048"></p><h3 id="案例混合数据form-2"><a class="anchor" href="#案例混合数据form-2">#</a> 案例：混合数据（form）</h3><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> django <span class="token keyword">import</span> forms</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapForm</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UpForm</span><span class="token punctuation">(</span>BootStrapForm<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    name <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    age <span class="token operator">=</span> forms<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    img <span class="token operator">=</span> forms<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"头像"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">def</span> <span class="token function">upload_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    title <span class="token operator">=</span> <span class="token string">"Form上传"</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment"># &#123;'name': ' 武沛齐 ', 'age': 123, 'img': &lt;InMemoryUploadedFile: 图片 1.png (image/png)>&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment"># 1. 读取图片内容，写入到文件夹中并获取文件的路径。</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        image_object <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment"># media_path = os.path.join(settings.MEDIA_ROOT, image_object.name)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        media_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"media"</span><span class="token punctuation">,</span> image_object<span class="token punctuation">.</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>media_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> image_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment"># 2. 将图片文件路径写入到数据库</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        models<span class="token punctuation">.</span>Boss<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            name<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            age<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            img<span class="token operator">=</span>media_path<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="案例混合数据modalform"><a class="anchor" href="#案例混合数据modalform">#</a> 案例：混合数据（ModalForm)</h3><h4 id="modelspy"><a class="anchor" href="#modelspy">#</a> <span class="exturl" data-url="aHR0cDovL21vZGVscy5weQ==">models.py</span></h4><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">City</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token triple-quoted-string string">""" 城市 """</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"名称"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"人口"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment"># 本质上数据库也是 CharField，自动保存数据。</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    img <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"Logo"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">'city/'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="定义modelform"><a class="anchor" href="#定义modelform">#</a> 定义 ModelForm</h4><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapModelForm</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">UpModelForm</span><span class="token punctuation">(</span>BootStrapModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        model <span class="token operator">=</span> models<span class="token punctuation">.</span>City</pre></td></tr><tr><td data-num="9"></td><td><pre>        fields <span class="token operator">=</span> <span class="token string">"__all__"</span></pre></td></tr></table></figure><h4 id="视图"><a class="anchor" href="#视图">#</a> 视图</h4><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">def</span> <span class="token function">upload_modal_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token triple-quoted-string string">""" 上传文件和数据（modelForm）"""</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    title <span class="token operator">=</span> <span class="token string">"ModelForm上传文件"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        form <span class="token operator">=</span> UpModelForm<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    form <span class="token operator">=</span> UpModelForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment"># 对于文件：自动保存；</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment"># 字段 + 上传路径写入到数据库</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="小结"><a class="anchor" href="#小结">#</a> 小结</h3><ul><li><p>自己手动去写</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr></table></figure></li><li><p>Form 组件（表单验证）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>request<span class="token punctuation">.</span>POST</pre></td></tr><tr><td data-num="2"></td><td><pre>file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>具体文件操作还是手动自己做。</pre></td></tr></table></figure></li><li><p>ModelForm（表单验证 + 自动保存数据库 + 自动保存文件）</p><pre><code>- Media文件夹
- Models.py定义类文件要
	img = models.FileField(verbose_name=&quot;Logo&quot;, max_length=128, upload_to='city/')
</code></pre></li></ul><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2><p>关于 django 的开发知识点，更多的案例：</p><ul><li><p>Python 基础（课件 <span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vd3VwZWlxaS9weXRob25fY291cnNlJUVGJUJDJTg5">https://gitee.com/wupeiqi/python_course）</span></p><pre><code>https://www.bilibili.com/video/BV1m54y1r7zE
</code></pre></li><li><p>并发编程（进程线程协程）</p><pre><code>https://www.bilibili.com/video/BV1Ev411G7i3?spm_id_from=333.999.0.0

# 不建议小白学（协程）
https://www.bilibili.com/video/BV1NA411g7yf?spm_id_from=333.999.0.0
</code></pre></li><li><p>MySQL 数据库</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 2021 最新推荐</span></pre></td></tr><tr><td data-num="2"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV15R4y1b7y9?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 2017 年</span></pre></td></tr><tr><td data-num="5"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1DE411n7fU?</pre></td></tr></table></figure></li><li><p>前端开发</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1QE411j7bV?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span></pre></td></tr></table></figure></li><li><p>django 开发知识点</p><pre><code>https://www.bilibili.com/video/BV1zE411x7LG
https://www.bilibili.com/video/BV1JE411V7xk
</code></pre></li><li><p>项目开发</p><pre><code>任务管理平台：https://www.bilibili.com/video/BV1uA411b77M
</code></pre></li><li><p>进阶项目（增删改查、权限）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>space<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">283478842</span><span class="token operator">/</span>channel<span class="token operator">/</span>detail?cid<span class="token operator">=</span><span class="token number">91596</span><span class="token operator">&amp;</span>ctype<span class="token operator">=</span><span class="token number">0</span></pre></td></tr></table></figure></li><li><p>前后端分离的项目： django + drf 框架 + vue.js</p><pre><code>- Django
- drf框架
	- https://www.bilibili.com/video/BV1ZE411j7RK
</code></pre></li><li><p>git 版本控制和协同开发 + 任务管理平台</p><pre><code>https://www.bilibili.com/video/BV19E411f76x?spm_id_from=333.999.0.0
</code></pre></li><li><p>微信小程序 + Django + drf 框架编写</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1jC4y1s7QD?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span></pre></td></tr></table></figure></li></ul><div class="tags"><a href="/tags/django/" rel="tag"><i class="ic i-tag"></i> django</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-09-27 00:13:23" itemprop="dateModified" datetime="2022-09-27T00:13:23+08:00">2022-09-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="yuan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="yuan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="yuan 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>yuan <i class="ic i-at"><em>@</em></i>yuan</li><li class="link"><strong>本文链接：</strong> <a href="https://jyuanhust.github.io/2022/08/25/backend/django/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django/" title="文件上传-django">https://jyuanhust.github.io/2022/08/25/backend/django/文件上传-django/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/08/25/backend/django/%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-django/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(51).webp" title="员工管理系统-django"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> django</span><h3>员工管理系统-django</h3></a></div><div class="item right"><a href="/2022/08/25/ai/cv/GAN/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(40).webp" title="GAN"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> cv</span><h3>GAN</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django"><span class="toc-number">1.</span> <span class="toc-text">文件上传 - Django</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0"><span class="toc-number">1.1.</span> <span class="toc-text">1. 知识点复习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 基础入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%A8%A1%E5%9D%97"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5 面向对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-mysql%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.6.</span> <span class="toc-text">1.6 MySQL 数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91"><span class="toc-number">1.1.7.</span> <span class="toc-text">1.7 前端开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-django"><span class="toc-number">1.1.8.</span> <span class="toc-text">1.8 Django</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E5%85%B3%E4%BA%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.2.</span> <span class="toc-text">2. 关于文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%89%B9%E9%87%8F%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.2.</span> <span class="toc-text">案例：批量上传数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%B7%B7%E5%90%88%E6%95%B0%E6%8D%AEform"><span class="toc-number">1.2.3.</span> <span class="toc-text">案例：混合数据（Form）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%90%AF%E7%94%A8media"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.2 启用 media</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%B7%B7%E5%90%88%E6%95%B0%E6%8D%AEform-2"><span class="toc-number">1.2.5.</span> <span class="toc-text">案例：混合数据（form）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%B7%B7%E5%90%88%E6%95%B0%E6%8D%AEmodalform"><span class="toc-number">1.2.6.</span> <span class="toc-text">案例：混合数据（ModalForm)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#modelspy"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">models.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89modelform"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">定义 ModelForm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.2.7.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/07/24/backend/django/django/" rel="bookmark" title="初识django">初识django</a></li><li><a href="/2022/08/24/backend/django/django%E4%B8%AD%E9%81%87%E5%88%B0%E9%94%99%E8%AF%AF%EF%BC%9AForbidden-CSRF-cookie-not-set/" rel="bookmark" title="django中遇到错误：Forbidden_CSRF_cookie_not_set">django中遇到错误：Forbidden_CSRF_cookie_not_set</a></li><li><a href="/2022/08/24/backend/django/%E8%AE%BF%E9%97%AEdjango%E5%90%8E%E5%8F%B0%EF%BC%8C%E6%8F%90%E7%A4%BACSRF%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5-%E8%AF%B7%E6%B1%82%E8%A2%AB%E4%B8%AD%E6%96%AD-Referer-checking-failed-does-not-match-any-trust/" rel="bookmark" title="访问django后台，提示CSRF验证失败._请求被中断.Referer_checking_failed_-_does_not_match_any_trust">访问django后台，提示CSRF验证失败._请求被中断.Referer_checking_failed_-_does_not_match_any_trust</a></li><li><a href="/2022/08/25/backend/django/websocket-django/" rel="bookmark" title="websocket-django">websocket-django</a></li><li><a href="/2022/08/25/backend/django/%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-django/" rel="bookmark" title="员工管理系统-django">员工管理系统-django</a></li><li class="active"><a href="/2022/08/25/backend/django/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-django/" rel="bookmark" title="文件上传-django">文件上传-django</a></li><li><a href="/2022/08/26/backend/django/DRF%E7%BB%84%E4%BB%B6/" rel="bookmark" title="DRF组件">DRF组件</a></li><li><a href="/2022/09/12/backend/django/django%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/" rel="bookmark" title="django配置跨域请求">django配置跨域请求</a></li><li><a href="/2022/09/13/backend/django/%E5%9C%A8app%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8Btests%E6%A8%A1%E5%9D%97%E4%B8%AD%E6%B5%8B%E8%AF%95/" rel="bookmark" title="在app文件夹下tests模块中测试">在app文件夹下tests模块中测试</a></li><li><a href="/2022/09/14/backend/django/drf%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" rel="bookmark" title="drf官网阅读笔记">drf官网阅读笔记</a></li><li><a href="/2022/09/15/backend/django/jwt-django/" rel="bookmark" title="jwt-django">jwt-django</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="yuan" data-src="/images/avatar.jpg"><p class="name" itemprop="name">yuan</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">429</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">72</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">61</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item email" data-url="bWFpbHRvOjIwODM2MzU1MjVAcXEuY29t" title="mailto:2083635525@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/08/25/backend/django/%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-django/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/08/25/ai/cv/GAN/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" title="分类于 pytorch深度学习">pytorch深度学习</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter-optimization/" title="分类于 chapter_optimization">chapter_optimization</a></div><span><a href="/2023/02/15/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter_optimization/optimization-intro/" title="optimization-intro">optimization-intro</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/backend/" title="分类于 后端">后端</a> <i class="ic i-angle-right"></i> <a href="/categories/backend/spring/" title="分类于 spring">spring</a></div><span><a href="/2022/11/12/backend/Spring/spring_day03/Spring_day03/" title="Spring_day03">Spring_day03</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/tools/" title="分类于 tools">tools</a></div><span><a href="/2024/05/28/operation/%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4%E5%A4%A7%E9%87%8F%E6%96%87%E4%BB%B6/" title="快速删除大量文件">快速删除大量文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 computer-science">computer-science</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href="/2022/08/24/computer-science/base/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/" title="存储系统">存储系统</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" title="分类于 pytorch深度学习">pytorch深度学习</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter-multilayer-perceptrons/" title="分类于 chapter_multilayer-perceptrons">chapter_multilayer-perceptrons</a></div><span><a href="/2023/02/15/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter_multilayer-perceptrons/kaggle-house-price/" title="kaggle-house-price">kaggle-house-price</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/" title="分类于 nlp">nlp</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/" title="分类于 huggingface">huggingface</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/Tokenizer%E5%BA%93/" title="分类于 Tokenizer库">Tokenizer库</a></div><span><a href="/2022/11/12/ai/nlp/huggingface/Tokenizers%E5%BA%93/NormalizationAndPre-tokenization/" title="Normalization and pre-tokenization">Normalization and pre-tokenization</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/06/25/computer-science/%E6%AF%94%E8%B5%9B/%E8%93%9D%E6%A1%A5%E6%9D%AF/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%B1%87%E6%80%BB/JavaScript/%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86%E7%82%B9/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 computer-science">computer-science</a></div><span><a href="/2023/02/27/computer-science/%E6%AF%94%E8%B5%9B/%E8%93%9D%E6%A1%A5%E6%9D%AF/note/" title="蓝桥杯省赛题目理解">蓝桥杯省赛题目理解</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/cv/" title="分类于 cv">cv</a></div><span><a href="/2022/08/25/ai/cv/MobileNet/" title="MobileNet">MobileNet</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch/" title="分类于 pytorch">pytorch</a></div><span><a href="/2022/07/22/ai/pytorch/pytorch%E5%85%A5%E9%97%A8/" title="pytorch入门">pytorch入门</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">yuan @ Mi Manchi</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">2.9m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">44:38</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/08/25/backend/django/文件上传-django/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>