<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="yuan" href="https://jyuanhust.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="yuan" href="https://jyuanhust.github.io/atom.xml"><link rel="alternate" type="application/json" title="yuan" href="https://jyuanhust.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="数据库"><link rel="canonical" href="https://jyuanhust.github.io/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/"><title>实训2-表结构与完整性约束的修改ALTER - 数据库系统原理实践MySQL - computer-science | Mi Manchi = yuan = Whatever is worth doing at all is worth doing well</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">实训2-表结构与完整性约束的修改ALTER</h1><div class="meta"><span class="item" title="创建时间：2022-08-24 22:05:54"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-08-24T22:05:54+08:00">2022-08-24</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>9.1k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>8 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Mi Manchi</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(20).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(11).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(16).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(36).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(49).webp"></li><li class="item" data-background-image="https://gitee.com/zkz0/image/raw/master/img/img(54).webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 computer-science"><span itemprop="name">computer-science</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/" itemprop="item" rel="index" title="分类于 数据库系统原理实践MySQL"><span itemprop="name">数据库系统原理实践MySQL</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jyuanhust.github.io/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="yuan"><meta itemprop="description" content="Whatever is worth doing at all is worth doing well, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="yuan"></span><div class="body md" itemprop="articleBody"><h2 id="修改表名"><a class="anchor" href="#修改表名">#</a> 修改表名</h2><h3 id="相关知识"><a class="anchor" href="#相关知识">#</a> 相关知识</h3><p>修改表，包括更改表的名称，删除表中的列、约束，为表添加新的列、约束，修改表中列的名称、数据类型和约束等操作，均通过 Alter Table 语句来实现。</p><h3 id="alter-table语句"><a class="anchor" href="#alter-table语句">#</a> ALTER TABLE 语句</h3><p>Alter Table 语句用于修改由 Create Table 语句创建的表的结构。比如，添加或删除列，添加或删除约束，创建或销毁索引，更改列的数据类型，更改列名甚至表名等。</p><p>ALTER TABLE 的完整语法较复杂，这里仅介绍简化后的语法：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>修改事项 <span class="token punctuation">[</span>, 修改事项<span class="token punctuation">]</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span></pre></td></tr></table></figure><p>可见，在一条 ALTER TABLE 语句里，可以同时对表作多项修改。可选的修改事项有很多，常用的有：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>修改事项 ::<span class="token operator">=</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    ADD <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">&#123;</span>INDEX<span class="token operator">|</span>KEY<span class="token punctuation">&#125;</span> <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">[</span>类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>列1,<span class="token punctuation">..</span>.<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> 主码约束</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> UNIQUE约束</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> 外码约束</pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> CHECK约束</pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token operator">|</span> DROP <span class="token punctuation">&#123;</span>CHECK<span class="token operator">|</span>CONSTRAINT<span class="token punctuation">&#125;</span> 约束名</pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token operator">|</span> ALTER <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 <span class="token punctuation">&#123;</span>SET DEFAULT <span class="token punctuation">&#123;</span>常量 <span class="token operator">|</span> <span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token operator">|</span> DROP DEFAULT<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token operator">|</span> CHANGE <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 新列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token operator">|</span> DROP <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名</pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token operator">|</span> DROP <span class="token punctuation">&#123;</span>INDEX<span class="token operator">|</span>KEY<span class="token punctuation">&#125;</span> 索引名</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token operator">|</span> DROP PRIMARY KEY</pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token operator">|</span> DROP FOREIGN KEY fk_symbol</pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token operator">|</span> MODIFY <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token operator">|</span> RENAME COLUMN 列名 TO 新列名</pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token operator">|</span> RENAME <span class="token punctuation">&#123;</span>INDEX<span class="token operator">|</span>KEY<span class="token punctuation">&#125;</span> 索引名 TO 新索引名</pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token operator">|</span> RENAME <span class="token punctuation">[</span>TO<span class="token operator">|</span>AS<span class="token punctuation">]</span> 新表名</pre></td></tr></table></figure><p>归纳一下，修改事项主要有：</p><ul><li>用 ADD 关键词添加列和约束 (主码、外码、CHECK、UNIQUE 等约束)；</li><li>用 DROP 关键词删除列、约束和索引 (含 Unique)；</li><li>用 MODIFY 关键词修改列的定义 (数据类型和约束)；</li><li>用 RENAME 关键词修改列、索引和表的名称；</li><li>用 CHANGE 关键词修改列的名称，同时还可以修改其定义 (类型和约束)。</li></ul><p>需要说明的是：</p><ol><li>注意 RENAME,MODIFY 和 CHANGE 的区别：仅改列名，用 RENAME; 只改数据类型不改名，用 MODIFY; 既改名又改数据类型，用 CHANGE。</li><li>在用 MODIFY,CHANGE 更改列的数据类型和约束时，修改后的 CHECK 约束并不会生效 (MySQL 只作语法检查，并未实现代码 -- 至少 MySQL 8.0.22 还未实现)。但用 ADD 新增列的 CHECK 约束，是有效的。另外，用 ADD 新增的 CHECK 约束，也会生效。</li><li>删除主码约束只能用 Drop Primary Key 短语，不能使用 drop constraint 短语，即便在创建主码约束时显式命名了该主码约束。试图使用 “drop constraint 主码约束名” 短语删除主码，会给出错误提示，显示该约束并不存在。因为 MySQL 并没有完全实现 “constraint 约束名 primary key (...)” 短语的功能，仅作了语法检查，然后直接忽略了主码约束的命名。</li><li>给已有列增加 Default 约束，可用 “alter 列 set default ...” 短语；删除列的 default 约束，可用 “alter 列 drop default” 短语。当然，也可以用 “Modify 列名 数据类型 ...” 短语。如果该短语没有 default 约束，就相当于删除了原来的 default 约束，如果该短语带有 default 约束，就相当于添加了 default 约束，如果之前已有 default 约束，则新的 Default 约束将代替原有的 Default 约束；</li><li>删除 unique 约束，既可用 “drop constraint 约束名” 短语，也可以用 “drop key 索引名” 短语来实现，唯一性 (unique) 约束实际是用 Unique 索引来实现的，Unique 索引的名字总是与 Unique 约束名完全一样，它们本就是同一套机制。如果没有显式命名的话，Unqiue 索引名或者说 Unique 约束名一般与列同名 (组合属性作索引，则与组合属性中的第 1 列同名)。但要注意是的，在更改列名后，Unique 索引名并不会随之更改。在创建 Unqiue 约束时，用 “constriant” 短语给约束取一个有意义的名字，是一个值得推荐的习惯。</li></ol><h3 id="如何更改表名"><a class="anchor" href="#如何更改表名">#</a> 如何更改表名</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table 表名 <span class="token function">rename</span> <span class="token punctuation">[</span>TO<span class="token operator">|</span>AS<span class="token punctuation">]</span> 新表名</pre></td></tr></table></figure><h2 id="添加与删除字段"><a class="anchor" href="#添加与删除字段">#</a> 添加与删除字段</h2><h3 id="如何给表添加字段"><a class="anchor" href="#如何给表添加字段">#</a> 如何给表添加字段</h3><p>随着业务发展的需要，可能需要在原有表结构的基础上添加新的字段，由于建表时的疏忽，遗漏了某个字段，也需要将遗漏的列添加到表结构中。给表添加字段的语法是：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ADD <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span>  <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER 列名<span class="token punctuation">]</span></pre></td></tr></table></figure><p>在 alter table 语句中指定表名，接着用关键字 add column 申明要添加的列，包括列的名称，数据类型，以及可选的列约束。列约束可以是主码约束、外码约束、CHECK 约束、Default 约束、Unique 约束等其中的任何一个或一组约束。这些约束在之前的实验中都介绍过。最后，还可以指定新添加的列在表中的位置：</p><ul><li>关键字 FIRST 指示新添加的列为第 1 列；</li><li>AFTER 指示新添加的列紧跟在指定列的后面。</li></ul><p>如果省略位置指示，则新添加的列将成为表的最后一列。<br>关键字 column 可以省略。</p><p>示例：<br>学生表 student 的结构如下：</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667730698876.png" alt="1667730698876"></p><p>用以下语句创建了表 student:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>create table student<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  sno char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> primary key,</pre></td></tr><tr><td data-num="3"></td><td><pre>  sname varchar<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> not null,</pre></td></tr><tr><td data-num="4"></td><td><pre>  sex char<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="5"></td><td><pre>  age int</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>你可能已经注意到了，这条建表语句遗漏了列 sex 的约束，这个问题我们将在后面的实验中再解决，这里先考虑其它事情：</p><p>由于业务的发展，产生了新的需求，需要为该表添加一个字段，用于存储学生的手机号码：</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667730767068.png" alt="1667730767068"></p><p>怎么将列 mobile（以及对该列的完整性约束）添加到表 student 中呢？执行下面的语句即可：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">add</span> mobile char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> constraint CK_student_mobile check<span class="token punctuation">(</span>mobile rlike <span class="token string">'1[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这个 check 约束中的 rlike 还可以用 regexp 替代，它们是同义语。跟 Oracle 一样，MySQL 用正则匹配表达式来测试字段值是否符合某个 pattern，rlike 比 like 关键词所支持的功能要强大得多。</p><p>成功添加 mobile 列后，可以试着执行以下几条语句观察效果：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>insert into student values<span class="token punctuation">(</span><span class="token string">'1'</span>,<span class="token string">'ZHAO'</span>,<span class="token string">'男'</span>,18,<span class="token string">'13907106666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这条语句将插入一条数据到表 student 中；</p><p>再尝试执行：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>insert into student values<span class="token punctuation">(</span><span class="token string">'2'</span>,<span class="token string">'LI'</span>,<span class="token string">'女'</span>,18,<span class="token string">'23907106666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这一次，系统将输出报错信息：<br><code>ERROR 3819 (HY000): Check constraint 'CK_student_mobile' is violated.</code></p><p>这条错误信息提醒我们：插入的数据违反了 CK_student_mobile 这条约束规则 (手机号码第 1 位必须是 1)。<br>你也可以试着把手机号码的第 1 位改为 1，中间的某个数字换成字母，然后再试着插入，同样会触发错误。</p><h3 id="如何删除表中的字段"><a class="anchor" href="#如何删除表中的字段">#</a> 如何删除表中的字段</h3><p>删除字段，即从表中将某个列移出，其语法格式为：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 DROP <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名</pre></td></tr></table></figure><p>关键字 COLUMN 可以省略。</p><p>示例：<br>回到上面的例子（表 student)，假设在实际运行过程中，有人对数据库的设计提出了质疑：在学生档案里记录年龄的作法并不科学，因为年龄会随着时间的变化而变化，档案里记录 17 岁，还得根据当年记录的日期以及当下的日期推算实际年龄。替代方案是记录出生日期而不是年龄:</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667731242297.png" alt="1667731242297"></p><p>有两个方案实现这个改动：</p><ol><li>用 <code>alter table student change age DOB date</code> 直接改变列名和类数据类型；</li><li>先用 <code>alter table sudent add DOB date</code> 添加列 DOB，再用 <code>alter table student drop age</code> 删除列 age。</li></ol><p>如果表 student 是空表，则上述两个方案都是可行的。但在实际运行过程中，表 student 可能已经存储了数据，直接将一个 int 型的列改成 date 型的列，将出现类型不匹配错误。</p><p>另一方面，如果简单粗暴地删除列 age，同时添加 DOB 列，则原来存储的年龄信息都将丢失。</p><p>最好的方案是先添加列 DOB，然后根据当年记录时的年龄推算其大致的出生日期（相当于等价地保留了年龄数据）。在作完这个数据转换工作后，再剔除列 age。这个工作共分三步：</p><p>第 1 步，添加列 DOB:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student <span class="token function">add</span> DOB <span class="token function">date</span> after sex<span class="token punctuation">;</span></pre></td></tr></table></figure><p>列 DOB 将位于 sex 之后，age 之前。</p><p>第 2 步，根据 age 推算 DOB:<br>由于表 student 没有记录登记年龄的日期（实际系统总会记录学生是哪个年级的，学号中也往往包含入学年份信息），这里我们假设学生是 2020 年 9 月 1 日入学的：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>update student <span class="token builtin class-name">set</span> DOB <span class="token operator">=</span> date_add<span class="token punctuation">(</span><span class="token string">'2020-9-1'</span>, interval -1*age year<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>（注：date_add () 是 MySQL 的函数。）</p><p>执行完这条 update 语句后，可以执行下面这条语句查看表 student 的内容：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">select</span> * from student<span class="token punctuation">;</span></pre></td></tr></table></figure><p>你将看到：</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667731557209.png" alt="1667731557209"></p><p>DOB 列成功地转录了 age 的信息（以另一种表现形式）。</p><p>第 3 步，删除列 age:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student drop age<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="修改字段"><a class="anchor" href="#修改字段">#</a> 修改字段</h2><h3 id="相关知识-2"><a class="anchor" href="#相关知识-2">#</a> 相关知识</h3><p>1.ALTER TABLE 语句的用法；<br>2. 如何修改字段的名称；<br>3. 如何修改字段的数据类型和约束；<br>4. 如何修改字段在表中的位置。</p><h3 id="alter-table-语句"><a class="anchor" href="#alter-table-语句">#</a> Alter Table 语句</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>修改事项 <span class="token punctuation">[</span>, 修改事项<span class="token punctuation">]</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span></pre></td></tr></table></figure><p>与修改列名、列数据类型和列约束，以及列序的修改事项有：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>修改事项 ::<span class="token operator">=</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   ALTER <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 <span class="token punctuation">&#123;</span>SET DEFAULT <span class="token punctuation">&#123;</span>常量 <span class="token operator">|</span> <span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token operator">|</span> DROP DEFAULT<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">|</span> CHANGE <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 新列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">|</span> MODIFY <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token operator">|</span> RENAME COLUMN 列名 TO 新列名</pre></td></tr></table></figure><p>其中 CHANGE 短语可修改列名、数据类型和列约束；MODIFY 短语可修改列的数据类型和约束；RENAME 短语仅用于更改列名；ALTER 短语仅用于修改列的 DEFAULT 约束或删除列的 DEFAULT 约束。CHANGE 和 MODIFY 短语还可以修改列在表中的位置。</p><h3 id="如何修改字段的名称"><a class="anchor" href="#如何修改字段的名称">#</a> 如何修改字段的名称</h3><p>如果只需要修改列的名称，显然用 RENAME 短语最简单:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 RENAME COLUMN 列名 TO 新列名</pre></td></tr></table></figure><p><strong>注意：关键字 COLUMN 不能省略。</strong></p><p>如果修改列名的同时，还要修改列的类型和约束 (相当于删除之前的列，再插入一个全新的列，且插入的位置还可以随意指定)，则用 CHANGE 短语：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 CHANGE <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 新列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span> <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr></table></figure><p>关键字 column 可以省略，列约束和列位置都是可选的。如果新列带有 CHECK 约束的话，MySQL 只会对这个约束作语法检查，并不会去实现这个约束，其它类型的约束没有问题。如果真有这样的需求，不如先 DROP 之前的列，再 ADD 新的列，新列附带的 CHECK 约束是会被实现的。</p><h3 id="如何修改字段的数据类型和约束"><a class="anchor" href="#如何修改字段的数据类型和约束">#</a> 如何修改字段的数据类型和约束</h3><p>如果列名称不变，仅需要修改其数据类型和约束，则用 MODIFY 短语：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 MODIFY <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span>  <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr></table></figure><p>在修改数据类型和约束的同时，还可以改变列在表中的位置。<br>注意，一旦使用 MODIFY 短语修改列，则该列之前的数据类型、约束将被新的数据类型和约束取而代之。如果之前定义了列约束，修改后不带列约束，相当于删除了之前的约束。</p><p>如果需要修改 (或添加) 列的 DEFAULT 约束，则既可用上面的 MODIFY 短语，也可以使用 ALTER 短语：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ALTER <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 SET DEFAULT <span class="token punctuation">&#123;</span>常量 <span class="token operator">|</span> <span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>删除列的 DEFAULT 约束，则可以使用 ALTER 短语 (或 MODIFY 短语)：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ALTER <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 DROP DEFAULT</pre></td></tr></table></figure><h3 id="如何修改字段在表中的位置"><a class="anchor" href="#如何修改字段在表中的位置">#</a> 如何修改字段在表中的位置</h3><p>如果仅需修改列在表中的位置，仍用 MODIFY 短语：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 MODIFY <span class="token punctuation">[</span>COLUMN<span class="token punctuation">]</span> 列名 数据类型 <span class="token punctuation">[</span>列约束<span class="token punctuation">]</span>  <span class="token punctuation">[</span>FIRST <span class="token operator">|</span> AFTER col_name<span class="token punctuation">]</span></pre></td></tr></table></figure><p>需要把列名、数据类型和约束完整地重述一遍，并在其后带上位置指示短语：FIRST 或 AFTER 某个列。注意：如果数据类型和约束重述的跟之前的不一样，则相当于修改了这个列，如果重述的列名跟之前的不一样，则会抛出错误信息（列不存在）。</p><p>示例</p><p>居民登记表 resident 的结构如下</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667732658484.png" alt="1667732658484"></p><p>表中，居民身份证号 idNo 为我国于 1984 年开始使用的第 1 代身份证号，只有 15 位编码 (其中 7、8 两位为出生年份)。1999 年，居民身份证编号由 15 位升至 18 位：年份用 4 位表达，并在末尾增加了 1 位校验码。现在需要对表 resident 作如下修改：</p><ol><li>将身份证号 idNo 升级到 18 位；</li><li>身高 height 的类型改为无符号整数；</li><li>列名 educationalBackground 改为更简洁的 education。</li></ol><p>可以用三条 alter table 语句分别实现上述需求，当然，更便捷的方法是用一条语句:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table resident modify idNo char<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="2"></td><td><pre>       modify height int unsigned,</pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token function">rename</span> <span class="token function">column</span> educationalBackground to education<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="添加-删除与修改约束"><a class="anchor" href="#添加-删除与修改约束">#</a> 添加、删除与修改约束</h2><h3 id="相关知识-3"><a class="anchor" href="#相关知识-3">#</a> 相关知识</h3><ol><li>如何删除和添加主码约束；</li><li>如何删除和添加外码约束；</li><li>如何删除和添加 CHECK 约束；</li><li>如何删除和添加 UNIQUE 约束。</li></ol><h3 id="alter-table语句与约束"><a class="anchor" href="#alter-table语句与约束">#</a> Alter table 语句与约束</h3><p>Alter Table 语句与修改约束有关的部分：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>修改事项 <span class="token punctuation">[</span>, 修改事项<span class="token punctuation">]</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span></pre></td></tr></table></figure><p>删除与添加约束的修改事项有：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>修改事项 ::<span class="token operator">=</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> 主码约束</pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> UNIQUE约束</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> 外码约束</pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">|</span> ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> CHECK约束</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token operator">|</span> DROP <span class="token punctuation">&#123;</span>CHECK<span class="token operator">|</span>CONSTRAINT<span class="token punctuation">&#125;</span> 约束名</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token operator">|</span> DROP <span class="token punctuation">&#123;</span>INDEX<span class="token operator">|</span>KEY<span class="token punctuation">&#125;</span> 索引名</pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token operator">|</span> DROP PRIMARY KEY</pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token operator">|</span> DROP FOREIGN KEY fk_symbol</pre></td></tr></table></figure><p>可见，删除约束主要通过 alter table 语句的 drop 短语，添加约束则通过 alter table 语句的 add 短语来实现。</p><h3 id="主码的删除与添加"><a class="anchor" href="#主码的删除与添加">#</a> 主码的删除与添加</h3><p>删除主码：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 DROP PRIMARY KEY<span class="token punctuation">;</span></pre></td></tr></table></figure><p>或者：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>drop index <span class="token variable"><span class="token variable">`</span>PRIMARY<span class="token variable">`</span></span> on 表名<span class="token punctuation">;</span></pre></td></tr></table></figure><p>添加主码：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> PRIMARY KEY<span class="token punctuation">(</span>列1,列2,<span class="token punctuation">..</span>.<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>创建主码时，MySQL 将创建主码索引；删除主码，即意味着删除主码索引。反过来，删除主码索引，也意味着删除了主码约束。</p><p>迄今为止，MySQL 尽管在语法上支持主码约束的命名，但实际上并没有真正实现主码约束的命名功能。即，MySQL 并不会创建用户语句中所指定的约束名。所以，试图通过约束名删除主码约束是行不通的。</p><p>MySQL 中，所有的主码约束 (主码索引) 名均为 PRIMARY，无论怎么命名或更命，这个名字都不会改变。由于 PRIMARY 是 MySQL 的保留字，所以，在引用这个主码约束 (索引) 名时，必须用一对 `` 符号将 PRIMARY 括起来。</p><h3 id="主码约束举例"><a class="anchor" href="#主码约束举例">#</a> 主码约束举例</h3><p>例如，表 score 用于记录学生选修课程的成绩，其结构如下：</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667733492375.png" alt="1667733492375"></p><p>组合属性 (sno,cno) 是该表的主码。由于疏忽，用以下语句创建了该表：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>create table score<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>     sno char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="3"></td><td><pre>     cno char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> not null,</pre></td></tr><tr><td data-num="4"></td><td><pre>    grade int,</pre></td></tr><tr><td data-num="5"></td><td><pre>    constraint PK_score primary key<span class="token punctuation">(</span>sno<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>显然，主码定义错了，应当删除重建：</p><p>第 1 步：删除错误的主码定义：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table score drop primary key<span class="token punctuation">;</span></pre></td></tr></table></figure><p>第 2 步：重新创建主码：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table score <span class="token function">add</span> constraint PK_score primary key<span class="token punctuation">(</span>sno,cno<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>或者简单地写成：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table score <span class="token function">add</span> primary key<span class="token punctuation">(</span>sno,cno<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>以上两种写法的结果是一样的。因为 MySQL 会无视主码约束的命名短语 (仅作语法检查)，不会真正给主码约束命名。</p><p>当然，上述删除并重建主码的工作可用一条语句完成：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table score drop primary key, <span class="token function">add</span> primary key<span class="token punctuation">(</span>sno,cno<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>注意多个修改项之间用逗号分隔。</p><h3 id="外码的删除与添加"><a class="anchor" href="#外码的删除与添加">#</a> 外码的删除与添加</h3><p>alter table 语句提供了两个短语用来删除外码约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 DROP CONSTRAINT 约束名</pre></td></tr></table></figure><p>或:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 DROP FOREIGN KEY 约束名</pre></td></tr></table></figure><p>删除外码约束，必须显式给出外码约束的名字。</p><p>添加外码约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> 外码约束</pre></td></tr></table></figure><p>约束名是可选的，如果省略命名短语，MySQL 将按一定的规则自动命名。将来如果要删除该约束，必须先查询到该约束的名字（注：从 MySQL 的数据字典查询）。</p><p>创建外码时，MySQL 将同步创建外码索引，如果外码约束有显式命名，则外码索引与外码约束同名。如果外码约束未命名，则外码索引与外码列的列名同名。</p><p>删除外码约束时，外码索引不会跟着删除。如果将来重新创建了外码，并显式命名，则外码索引会自动更名 (与外码约束名保持相同)。</p><h3 id="check约束的删除与添加"><a class="anchor" href="#check约束的删除与添加">#</a> Check 约束的删除与添加</h3><p>删除 check 约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 DROP CONSTRAINT 约束名</pre></td></tr></table></figure><p>添加 check 约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ALTER TABLE 表名 ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> check<span class="token punctuation">(</span>条件表达式<span class="token punctuation">)</span></pre></td></tr></table></figure><p>同样地，如果未显式命名 check 约束，MySQL 将按一定规则自动予以命名。<br>添加约束时，如果现有数据与该约束规则相矛盾，则创建约束的请求会被拒绝。</p><h3 id="unique约束的删除与添加"><a class="anchor" href="#unique约束的删除与添加">#</a> Unique 约束的删除与添加</h3><p>删除 Unique 约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table 表名 drop constraint 约束名<span class="token punctuation">;</span></pre></td></tr></table></figure><p>或者：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>drop index 索引名 on 表名<span class="token punctuation">;</span></pre></td></tr></table></figure><p>添加 Unique 约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table 表名 ADD <span class="token punctuation">[</span>CONSTRAINT <span class="token punctuation">[</span>约束名<span class="token punctuation">]</span><span class="token punctuation">]</span> UNIQUE<span class="token punctuation">(</span>列1,<span class="token punctuation">..</span>.<span class="token punctuation">)</span></pre></td></tr></table></figure><p>创建 unique 约束时，将同步创建 unique 索引，索引名与约束同名。如果未显式命名 unique 约束或索引，MySQL 将按一定规则自动命名（单列的 unique 索引或约束与列同名）。</p><p>是故，删除 unique 索引，等同于删除 unique 约束。反过来，删除 unique 约束，也等同于删除了 unique 索引。</p><h3 id="举例"><a class="anchor" href="#举例">#</a> 举例</h3><p>现在院系表 dept 和学生表 student，两表结构分别如下：</p><p>院系表:dept</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667734201259.png" alt="1667734201259"></p><p>学生表：student</p><p><img data-src="/./images/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/1667734238582.png" alt="1667734238582"></p><p>除了两个主码和一个外码以下，表 student 还存在其它约束规则：</p><ul><li>手机号码是唯一的，不允许重复；</li><li>手机号码第 1 位必须是 1；</li><li>姓名是唯一的，不允许同名。</li></ul><p>建表语句如下：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>create table dept<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   deptNo char<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> primary key,</pre></td></tr><tr><td data-num="3"></td><td><pre>     deptName char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="4"></td><td><pre>     addr varchar<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>create table  student<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  sno char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> primary key,</pre></td></tr><tr><td data-num="9"></td><td><pre>    sname char<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> unique,</pre></td></tr><tr><td data-num="10"></td><td><pre>    mobile char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="11"></td><td><pre>    dept char<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="12"></td><td><pre>    constraint UN_student_mobile unique<span class="token punctuation">(</span>mobile<span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="13"></td><td><pre>    constraint FK_student_1 foreign key <span class="token punctuation">(</span>dept<span class="token punctuation">)</span> references dept<span class="token punctuation">(</span>deptNo<span class="token punctuation">)</span>,</pre></td></tr><tr><td data-num="14"></td><td><pre>    constraint CK_student_mobile check<span class="token punctuation">(</span>mobile like <span class="token string">'1%'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>显然，sname 列上的 unique 约束未命名，而 mobile 列上的 unique 约束则给予了显式命名。</p><p>现在对表 student 的约束作如下调整：</p><ol><li>列 sname 上的 unique 约束不合理，删除该约束；</li><li>列 dept 上的外码约束名改为：FK_student_dept；</li><li>列 mobile 上的 check 约束改为：电话号码第 1 位为 1，接下来 10 位为 0-9 之间的数字。</li></ol><p>约束的修改一般通过先删除旧约束再重建新约束来实现。</p><p>(1) 列 sname 上的 unique 未命名，其约束名与列名相同。可以通过以下语句删除该约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student drop constraint sname<span class="token punctuation">;</span><span class="token punctuation">\</span></pre></td></tr></table></figure><p>或</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>drop index sname on student<span class="token punctuation">;</span></pre></td></tr></table></figure><p>(2) 为列 dept 上的外码约束改名：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student drop constraint FK_student_1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>alter talbe student <span class="token function">add</span> constraint FK_student_dept  foreign key <span class="token punctuation">(</span>dept<span class="token punctuation">)</span> references dept<span class="token punctuation">(</span>deptNo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>(3) 重新定义对 mobile 列的 check 约束：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>alter table student drop constraint CK_student_mobile<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>alter table student <span class="token function">add</span> constraint CK_student_mobile check<span class="token punctuation">(</span>mobile regexp <span class="token string">'1[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><div class="tags"><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="ic i-tag"></i> 数据库</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-11-17 11:12:17" itemprop="dateModified" datetime="2022-11-17T11:12:17+08:00">2022-11-17</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="yuan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="yuan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="yuan 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>yuan <i class="ic i-at"><em>@</em></i>yuan</li><li class="link"><strong>本文链接：</strong> <a href="https://jyuanhust.github.io/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/" title="实训2-表结构与完整性约束的修改ALTER">https://jyuanhust.github.io/2022/08/24/computer-science/base/数据库系统原理实践MySQL/实训2-表结构与完整性约束的修改ALTER/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD5-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%92%E5%85%A5%E4%BF%AE%E6%94%B9%E4%B8%8E%E5%88%A0%E9%99%A4/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(41).webp" title="实训5-数据的插入修改与删除"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 数据库系统原理实践MySQL</span><h3>实训5-数据的插入修改与删除</h3></a></div><div class="item right"><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD11-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E4%B8%8E%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;zkz0&#x2F;image&#x2F;raw&#x2F;master&#x2F;img&#x2F;img(55).webp" title="实训11-并发控制与事务的隔离级别"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 数据库系统原理实践MySQL</span><h3>实训11-并发控制与事务的隔离级别</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">1.</span> <span class="toc-text">修改表名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86"><span class="toc-number">1.1.</span> <span class="toc-text">相关知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alter-table%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.</span> <span class="toc-text">ALTER TABLE 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">1.3.</span> <span class="toc-text">如何更改表名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8E%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-number">2.</span> <span class="toc-text">添加与删除字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%99%E8%A1%A8%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5"><span class="toc-number">2.1.</span> <span class="toc-text">如何给表添加字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-number">2.2.</span> <span class="toc-text">如何删除表中的字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5"><span class="toc-number">3.</span> <span class="toc-text">修改字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-2"><span class="toc-number">3.1.</span> <span class="toc-text">相关知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alter-table-%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.2.</span> <span class="toc-text">Alter Table 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E7%9A%84%E5%90%8D%E7%A7%B0"><span class="toc-number">3.3.</span> <span class="toc-text">如何修改字段的名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.4.</span> <span class="toc-text">如何修改字段的数据类型和约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%9C%A8%E8%A1%A8%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.5.</span> <span class="toc-text">如何修改字段在表中的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4%E4%B8%8E%E4%BF%AE%E6%94%B9%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.</span> <span class="toc-text">添加、删除与修改约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-3"><span class="toc-number">4.1.</span> <span class="toc-text">相关知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alter-table%E8%AF%AD%E5%8F%A5%E4%B8%8E%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.2.</span> <span class="toc-text">Alter table 语句与约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E7%A0%81%E7%9A%84%E5%88%A0%E9%99%A4%E4%B8%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">4.3.</span> <span class="toc-text">主码的删除与添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E7%A0%81%E7%BA%A6%E6%9D%9F%E4%B8%BE%E4%BE%8B"><span class="toc-number">4.4.</span> <span class="toc-text">主码约束举例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E7%A0%81%E7%9A%84%E5%88%A0%E9%99%A4%E4%B8%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">4.5.</span> <span class="toc-text">外码的删除与添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#check%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%A0%E9%99%A4%E4%B8%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">4.6.</span> <span class="toc-text">Check 约束的删除与添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%A0%E9%99%A4%E4%B8%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">4.7.</span> <span class="toc-text">Unique 约束的删除与添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B"><span class="toc-number">4.8.</span> <span class="toc-text">举例</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%AE%9A%E4%B9%89Create/" rel="bookmark" title="实训1-数据库和表与完整性约束的定义Create">实训1-数据库和表与完整性约束的定义Create</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD12-%E5%A4%87%E4%BB%BD%E6%97%A5%E5%BF%97-%E4%BB%8B%E8%B4%A8%E6%95%85%E9%9A%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D/" rel="bookmark" title="实训12-备份日志-介质故障与数据库恢复">实训12-备份日志-介质故障与数据库恢复</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD10-%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6/" rel="bookmark" title="实训10-安全性控制">实训10-安全性控制</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD3-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2Select%E4%B9%8B%E4%B8%80/" rel="bookmark" title="实训3-数据查询Select之一">实训3-数据查询Select之一</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD11-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E4%B8%8E%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/" rel="bookmark" title="实训11-并发控制与事务的隔离级别">实训11-并发控制与事务的隔离级别</a></li><li class="active"><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BF%AE%E6%94%B9ALTER/" rel="bookmark" title="实训2-表结构与完整性约束的修改ALTER">实训2-表结构与完整性约束的修改ALTER</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD5-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%92%E5%85%A5%E4%BF%AE%E6%94%B9%E4%B8%8E%E5%88%A0%E9%99%A4/" rel="bookmark" title="实训5-数据的插入修改与删除">实训5-数据的插入修改与删除</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD6-%E8%A7%86%E5%9B%BE/" rel="bookmark" title="实训6-视图">实训6-视图</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD9-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0/" rel="bookmark" title="实训9-用户自定义函数">实训9-用户自定义函数</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD8-%E8%A7%A6%E5%8F%91%E5%99%A8/" rel="bookmark" title="实训8-触发器">实训8-触发器</a></li><li><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD7-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E4%BA%8B%E5%8A%A1/" rel="bookmark" title="实训7-存储过程与事务">实训7-存储过程与事务</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="yuan" data-src="/images/avatar.jpg"><p class="name" itemprop="name">yuan</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">429</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">72</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">61</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item email" data-url="bWFpbHRvOjIwODM2MzU1MjVAcXEuY29t" title="mailto:2083635525@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD5-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%92%E5%85%A5%E4%BF%AE%E6%94%B9%E4%B8%8E%E5%88%A0%E9%99%A4/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/08/24/computer-science/base/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E5%AE%9E%E8%B7%B5MySQL/%E5%AE%9E%E8%AE%AD11-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E4%B8%8E%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2023/06/25/computer-science/base/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E8%BF%90%E7%AE%97/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/06/25/computer-science/%E6%AF%94%E8%B5%9B/%E8%93%9D%E6%A1%A5%E6%9D%AF/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%B1%87%E6%80%BB/CSS/%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86%E7%82%B92/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" title="分类于 pytorch深度学习">pytorch深度学习</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter-computational-performance/" title="分类于 chapter_computational-performance">chapter_computational-performance</a></div><span><a href="/2023/02/15/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter_computational-performance/multiple-gpus-concise/" title="multiple-gpus-concise">multiple-gpus-concise</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/06/25/computer-science/base/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" title="分类于 pytorch深度学习">pytorch深度学习</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter-attention-mechanisms/" title="分类于 chapter_attention-mechanisms">chapter_attention-mechanisms</a></div><span><a href="/2023/02/15/ai/pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapter_attention-mechanisms/multihead-attention/" title="multihead-attention">multihead-attention</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/cv/" title="分类于 cv">cv</a></div><span><a href="/2022/07/21/ai/cv/ncnn%E5%9C%A8window%EF%BC%8Cvs2019%EF%BC%8Ccmake-3-16-5-win64-x64%E7%BC%96%E8%AF%91/" title="ncnn在window，vs2019，cmake-3.16.5-win64-x64编译">ncnn在window，vs2019，cmake-3.16.5-win64-x64编译</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/frontend/" title="分类于 前端">前端</a> <i class="ic i-angle-right"></i> <a href="/categories/frontend/vue/" title="分类于 vue">vue</a></div><span><a href="/2022/08/26/frontend/vue/vuex/" title="vuex">vuex</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ai/" title="分类于 ai">ai</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/" title="分类于 nlp">nlp</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/" title="分类于 huggingface">huggingface</a> <i class="ic i-angle-right"></i> <a href="/categories/ai/nlp/huggingface/%E5%BE%AE%E8%B0%83%E4%B8%80%E4%B8%AA%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/" title="分类于 微调一个预训练模型">微调一个预训练模型</a></div><span><a href="/2022/11/12/ai/nlp/huggingface/%E5%BE%AE%E8%B0%83%E4%B8%80%E4%B8%AA%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/" title="微调一个预训练模型-处理数据">微调一个预训练模型-处理数据</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/06/25/computer-science/base/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于 python">python</a></div><span><a href="/2022/08/24/language/python/re-sub-%E7%94%A8%E6%B3%95%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/" title="re.sub()用法的详细介绍">re.sub()用法的详细介绍</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">yuan @ Mi Manchi</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">2.9m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">44:38</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/08/24/computer-science/base/数据库系统原理实践MySQL/实训2-表结构与完整性约束的修改ALTER/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>